var P=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ye=P((Gu,Ai)=>{"use strict";var Ni=["nodebuffer","arraybuffer","fragments"],Ii=typeof Blob<"u";Ii&&Ni.push("blob");Ai.exports={BINARY_TYPES:Ni,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:Ii,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ze=P(($u,_t)=>{"use strict";var{EMPTY_BUFFER:ia}=ye(),Tr=Buffer[Symbol.species];function na(t,e){if(t.length===0)return ia;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new Tr(r.buffer,r.byteOffset,n):r}function Li(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function Pi(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function sa(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function xr(t){if(xr.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Tr(t):ArrayBuffer.isView(t)?e=new Tr(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),xr.readOnly=!1),e}_t.exports={concat:na,mask:Li,toArrayBuffer:sa,toBuffer:xr,unmask:Pi};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");_t.exports.mask=function(e,r,n,i,s){s<48?Li(e,r,n,i,s):t.mask(e,r,n,i,s)},_t.exports.unmask=function(e,r){e.length<32?Pi(e,r):t.unmask(e,r)}}catch{}});var Bi=P((zu,Fi)=>{"use strict";var Mi=Symbol("kDone"),br=Symbol("kRun"),vr=class{constructor(e){this[Mi]=()=>{this.pending--,this[br]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[br]()}[br](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Mi])}}};Fi.exports=vr});var tt=P((Hu,qi)=>{"use strict";var Je=require("zlib"),Ui=Ze(),oa=Bi(),{kStatusCode:ki}=ye(),aa=Buffer[Symbol.species],ca=Buffer.from([0,0,255,255]),Tt=Symbol("permessage-deflate"),me=Symbol("total-length"),et=Symbol("callback"),De=Symbol("buffers"),Et=Symbol("error"),wt,Dr=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!wt){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;wt=new oa(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[et];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){wt.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){wt.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Je.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Je.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Tt]=this,this._inflate[me]=0,this._inflate[De]=[],this._inflate.on("error",la),this._inflate.on("data",Ri)}this._inflate[et]=n,this._inflate.write(e),r&&this._inflate.write(ca),this._inflate.flush(()=>{let s=this._inflate[Et];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=Ui.concat(this._inflate[De],this._inflate[me]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[me]=0,this._inflate[De]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Je.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Je.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[me]=0,this._deflate[De]=[],this._deflate.on("data",ua)}this._deflate[et]=n,this._deflate.write(e),this._deflate.flush(Je.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=Ui.concat(this._deflate[De],this._deflate[me]);r&&(s=new aa(s.buffer,s.byteOffset,s.length-4)),this._deflate[et]=null,this._deflate[me]=0,this._deflate[De]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};qi.exports=Dr;function ua(t){this[De].push(t),this[me]+=t.length}function Ri(t){if(this[me]+=t.length,this[Tt]._maxPayload<1||this[me]<=this[Tt]._maxPayload){this[De].push(t);return}this[Et]=new RangeError("Max payload size exceeded"),this[Et].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Et][ki]=1009,this.removeListener("data",Ri),this.reset()}function la(t){this[Tt]._inflate=null,t[ki]=1007,this[et](t)}});var je=P((Yu,xt)=>{"use strict";var{isUtf8:ji}=require("buffer"),{hasBlob:fa}=ye(),ha=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function da(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Or(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function pa(t){return fa&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}xt.exports={isBlob:pa,isValidStatusCode:da,isValidUTF8:Or,tokenChars:ha};if(ji)xt.exports.isValidUTF8=function(t){return t.length<24?Or(t):ji(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");xt.exports.isValidUTF8=function(e){return e.length<32?Or(e):t(e)}}catch{}});var Ar=P((Ku,Hi)=>{"use strict";var{Writable:ya}=require("stream"),Xi=tt(),{BINARY_TYPES:ma,EMPTY_BUFFER:Vi,kStatusCode:ga,kWebSocket:_a}=ye(),{concat:Sr,toArrayBuffer:wa,unmask:Ea}=Ze(),{isValidStatusCode:Ta,isValidUTF8:Wi}=je(),bt=Buffer[Symbol.species],ne=0,Gi=1,$i=2,zi=3,Cr=4,Nr=5,vt=6,Ir=class extends ya{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||ma[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[_a]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=ne}_write(e,r,n){if(this._opcode===8&&this._state==ne)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new bt(n.buffer,n.byteOffset+e,n.length-e),new bt(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new bt(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case ne:this.getInfo(e);break;case Gi:this.getPayloadLength16(e);break;case $i:this.getPayloadLength64(e);break;case zi:this.getMask();break;case Cr:this.getData(e);break;case Nr:case vt:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[Xi.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=Gi:this._payloadLength===127?this._state=$i:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=zi:this._state=Cr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Cr}getData(e){let r=Vi;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Ea(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Nr,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[Xi.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===ne&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=ne;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Sr(n,r):this._binaryType==="arraybuffer"?i=wa(Sr(n,r)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=ne):(this._state=vt,setImmediate(()=>{this.emit("message",i,!0),this._state=ne,this.startLoop(e)}))}else{let i=Sr(n,r);if(!this._skipUTF8Validation&&!Wi(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===Nr||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=ne):(this._state=vt,setImmediate(()=>{this.emit("message",i,!1),this._state=ne,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,Vi),this.end();else{let n=e.readUInt16BE(0);if(!Ta(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new bt(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Wi(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=ne;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=ne):(this._state=vt,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=ne,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[ga]=i,o}};Hi.exports=Ir});var Mr=P((Zu,Qi)=>{"use strict";var{Duplex:Qu}=require("stream"),{randomFillSync:xa}=require("crypto"),Yi=tt(),{EMPTY_BUFFER:ba,kWebSocket:va,NOOP:Da}=ye(),{isBlob:Xe,isValidStatusCode:Oa}=je(),{mask:Ki,toBuffer:Le}=Ze(),se=Symbol("kByteLength"),Sa=Buffer.alloc(4),Dt=8*1024,Pe,Ve=Dt,ce=0,Ca=1,Na=2,Lr=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=ce,this.onerror=Da,this[va]=void 0}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||Sa,r.generateMask?r.generateMask(n):(Ve===Dt&&(Pe===void 0&&(Pe=Buffer.alloc(Dt)),xa(Pe,0,Dt),Ve=0),n[0]=Pe[Ve++],n[1]=Pe[Ve++],n[2]=Pe[Ve++],n[3]=Pe[Ve++]),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let l;typeof e=="string"?(!r.mask||o)&&r[se]!==void 0?l=r[se]:(e=Buffer.from(e),l=e.length):(l=e.length,i=r.mask&&r.readOnly&&!o);let f=l;l>=65536?(s+=8,f=127):l>125&&(s+=2,f=126);let d=Buffer.allocUnsafe(i?l+s:s);return d[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(d[0]|=64),d[1]=f,f===126?d.writeUInt16BE(l,2):f===127&&(d[2]=d[3]=0,d.writeUIntBE(l,4,6)),r.mask?(d[1]|=128,d[s-4]=n[0],d[s-3]=n[1],d[s-2]=n[2],d[s-1]=n[3],o?[d,e]:i?(Ki(e,n,d,s,l),[d]):(Ki(e,n,e,0,l),[d,e])):[d,e]}close(e,r,n,i){let s;if(e===void 0)s=ba;else{if(typeof e!="number"||!Oa(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let l=Buffer.byteLength(r);if(l>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+l),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[se]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==ce?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):Xe(e)?(i=e.size,s=!1):(e=Le(e),i=e.length,s=Le.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[se]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};Xe(e)?this._state!==ce?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==ce?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):Xe(e)?(i=e.size,s=!1):(e=Le(e),i=e.length,s=Le.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[se]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};Xe(e)?this._state!==ce?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==ce?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[Yi.extensionName],s=r.binary?2:1,o=r.compress,l,f;typeof e=="string"?(l=Buffer.byteLength(e),f=!1):Xe(e)?(l=e.size,f=!1):(e=Le(e),l=e.length,f=Le.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=l>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let d={[se]:l,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:f,rsv1:o};Xe(e)?this._state!==ce?this.enqueue([this.getBlobData,e,this._compress,d,n]):this.getBlobData(e,this._compress,d,n):this._state!==ce?this.enqueue([this.dispatch,e,this._compress,d,n]):this.dispatch(e,this._compress,d,n)}getBlobData(e,r,n,i){this._bufferedBytes+=n[se],this._state=Na,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let l=new Error("The socket was closed while the blob was being read");process.nextTick(Pr,this,l,i);return}this._bufferedBytes-=n[se];let o=Le(s);r?this.dispatch(o,r,n,i):(this._state=ce,this.sendFrame(t.frame(o,n),i),this.dequeue())}).catch(s=>{process.nextTick(Ia,this,s,i)})}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[Yi.extensionName];this._bufferedBytes+=n[se],this._state=Ca,s.compress(e,n.fin,(o,l)=>{if(this._socket.destroyed){let f=new Error("The socket was closed while data was being compressed");Pr(this,f,i);return}this._bufferedBytes-=n[se],this._state=ce,n.readOnly=!1,this.sendFrame(t.frame(l,n),i),this.dequeue()})}dequeue(){for(;this._state===ce&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][se],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][se],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};Qi.exports=Lr;function Pr(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let i=t._queue[n],s=i[i.length-1];typeof s=="function"&&s(e)}}function Ia(t,e,r){Pr(t,e,r),t.onerror(e)}});var an=P((Ju,on)=>{"use strict";var{kForOnEventAttribute:rt,kListener:Fr}=ye(),Zi=Symbol("kCode"),Ji=Symbol("kData"),en=Symbol("kError"),tn=Symbol("kMessage"),rn=Symbol("kReason"),We=Symbol("kTarget"),nn=Symbol("kType"),sn=Symbol("kWasClean"),ge=class{constructor(e){this[We]=null,this[nn]=e}get target(){return this[We]}get type(){return this[nn]}};Object.defineProperty(ge.prototype,"target",{enumerable:!0});Object.defineProperty(ge.prototype,"type",{enumerable:!0});var Me=class extends ge{constructor(e,r={}){super(e),this[Zi]=r.code===void 0?0:r.code,this[rn]=r.reason===void 0?"":r.reason,this[sn]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[Zi]}get reason(){return this[rn]}get wasClean(){return this[sn]}};Object.defineProperty(Me.prototype,"code",{enumerable:!0});Object.defineProperty(Me.prototype,"reason",{enumerable:!0});Object.defineProperty(Me.prototype,"wasClean",{enumerable:!0});var Ge=class extends ge{constructor(e,r={}){super(e),this[en]=r.error===void 0?null:r.error,this[tn]=r.message===void 0?"":r.message}get error(){return this[en]}get message(){return this[tn]}};Object.defineProperty(Ge.prototype,"error",{enumerable:!0});Object.defineProperty(Ge.prototype,"message",{enumerable:!0});var it=class extends ge{constructor(e,r={}){super(e),this[Ji]=r.data===void 0?null:r.data}get data(){return this[Ji]}};Object.defineProperty(it.prototype,"data",{enumerable:!0});var Aa={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[rt]&&i[Fr]===e&&!i[rt])return;let n;if(t==="message")n=function(s,o){let l=new it("message",{data:o?s:s.toString()});l[We]=this,Ot(e,this,l)};else if(t==="close")n=function(s,o){let l=new Me("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});l[We]=this,Ot(e,this,l)};else if(t==="error")n=function(s){let o=new Ge("error",{error:s,message:s.message});o[We]=this,Ot(e,this,o)};else if(t==="open")n=function(){let s=new ge("open");s[We]=this,Ot(e,this,s)};else return;n[rt]=!!r[rt],n[Fr]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Fr]===e&&!r[rt]){this.removeListener(t,r);break}}};on.exports={CloseEvent:Me,ErrorEvent:Ge,Event:ge,EventTarget:Aa,MessageEvent:it};function Ot(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Br=P((el,cn)=>{"use strict";var{tokenChars:nt}=je();function ue(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function La(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,l,f=-1,d=-1,x=-1,w=0;for(;w<t.length;w++)if(d=t.charCodeAt(w),o===void 0)if(x===-1&&nt[d]===1)f===-1&&(f=w);else if(w!==0&&(d===32||d===9))x===-1&&f!==-1&&(x=w);else if(d===59||d===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${w}`);x===-1&&(x=w);let p=t.slice(f,x);d===44?(ue(e,p,r),r=Object.create(null)):o=p,f=x=-1}else throw new SyntaxError(`Unexpected character at index ${w}`);else if(l===void 0)if(x===-1&&nt[d]===1)f===-1&&(f=w);else if(d===32||d===9)x===-1&&f!==-1&&(x=w);else if(d===59||d===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${w}`);x===-1&&(x=w),ue(r,t.slice(f,x),!0),d===44&&(ue(e,o,r),r=Object.create(null),o=void 0),f=x=-1}else if(d===61&&f!==-1&&x===-1)l=t.slice(f,w),f=x=-1;else throw new SyntaxError(`Unexpected character at index ${w}`);else if(i){if(nt[d]!==1)throw new SyntaxError(`Unexpected character at index ${w}`);f===-1?f=w:n||(n=!0),i=!1}else if(s)if(nt[d]===1)f===-1&&(f=w);else if(d===34&&f!==-1)s=!1,x=w;else if(d===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${w}`);else if(d===34&&t.charCodeAt(w-1)===61)s=!0;else if(x===-1&&nt[d]===1)f===-1&&(f=w);else if(f!==-1&&(d===32||d===9))x===-1&&(x=w);else if(d===59||d===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${w}`);x===-1&&(x=w);let p=t.slice(f,x);n&&(p=p.replace(/\\/g,""),n=!1),ue(r,l,p),d===44&&(ue(e,o,r),r=Object.create(null),o=void 0),l=void 0,f=x=-1}else throw new SyntaxError(`Unexpected character at index ${w}`);if(f===-1||s||d===32||d===9)throw new SyntaxError("Unexpected end of input");x===-1&&(x=w);let _=t.slice(f,x);return o===void 0?ue(e,_,r):(l===void 0?ue(r,_,!0):n?ue(r,l,_.replace(/\\/g,"")):ue(r,l,_),ue(e,o,r)),e}function Pa(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}cn.exports={format:Pa,parse:La}});var jr=P((il,En)=>{"use strict";var Ma=require("events"),Fa=require("https"),Ba=require("http"),fn=require("net"),Ua=require("tls"),{randomBytes:ka,createHash:Ra}=require("crypto"),{Duplex:tl,Readable:rl}=require("stream"),{URL:Ur}=require("url"),Oe=tt(),qa=Ar(),ja=Mr(),{isBlob:Xa}=je(),{BINARY_TYPES:un,EMPTY_BUFFER:St,GUID:Va,kForOnEventAttribute:kr,kListener:Wa,kStatusCode:Ga,kWebSocket:$,NOOP:hn}=ye(),{EventTarget:{addEventListener:$a,removeEventListener:za}}=an(),{format:Ha,parse:Ya}=Br(),{toBuffer:Ka}=Ze(),Qa=30*1e3,dn=Symbol("kAborted"),Rr=[8,13],_e=["CONNECTING","OPEN","CLOSING","CLOSED"],Za=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,j=class t extends Ma{constructor(e,r,n){super(),this._binaryType=un[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=St,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),pn(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){un.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new qa({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new ja(e,this._extensions,n.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[$]=this,s[$]=this,e[$]=this,i.on("conclude",tc),i.on("drain",rc),i.on("error",ic),i.on("message",nc),i.on("ping",sc),i.on("pong",oc),s.onerror=ac,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",gn),e.on("data",Nt),e.on("end",_n),e.on("error",wn),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Oe.extensionName]&&this._extensions[Oe.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){te(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),mn(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){qr(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||St,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){qr(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||St,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){qr(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Oe.extensionName]||(i.compress=!1),this._sender.send(e||St,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){te(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(j,"CONNECTING",{enumerable:!0,value:_e.indexOf("CONNECTING")});Object.defineProperty(j.prototype,"CONNECTING",{enumerable:!0,value:_e.indexOf("CONNECTING")});Object.defineProperty(j,"OPEN",{enumerable:!0,value:_e.indexOf("OPEN")});Object.defineProperty(j.prototype,"OPEN",{enumerable:!0,value:_e.indexOf("OPEN")});Object.defineProperty(j,"CLOSING",{enumerable:!0,value:_e.indexOf("CLOSING")});Object.defineProperty(j.prototype,"CLOSING",{enumerable:!0,value:_e.indexOf("CLOSING")});Object.defineProperty(j,"CLOSED",{enumerable:!0,value:_e.indexOf("CLOSED")});Object.defineProperty(j.prototype,"CLOSED",{enumerable:!0,value:_e.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(j.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(j.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[kr])return e[Wa];return null},set(e){for(let r of this.listeners(t))if(r[kr]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[kr]:!0})}})});j.prototype.addEventListener=$a;j.prototype.removeEventListener=za;En.exports=j;function pn(t,e,r,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Rr[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,!Rr.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Rr.join(", ")})`);let s;if(e instanceof Ur)s=e;else try{s=new Ur(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",l=s.protocol==="ws+unix:",f;if(s.protocol!=="ws:"&&!o&&!l?f=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:l&&!s.pathname?f="The URL's pathname is empty":s.hash&&(f="The URL contains a fragment identifier"),f){let T=new SyntaxError(f);if(t._redirects===0)throw T;Ct(t,T);return}let d=o?443:80,x=ka(16).toString("base64"),w=o?Fa.request:Ba.request,_=new Set,p;if(i.createConnection=i.createConnection||(o?ec:Ja),i.defaultPort=i.defaultPort||d,i.port=s.port||d,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":x,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(p=new Oe(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Ha({[Oe.extensionName]:p.offer()})),r.length){for(let T of r){if(typeof T!="string"||!Za.test(T)||_.has(T))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(T)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),l){let T=i.path.split(":");i.socketPath=T[0],i.path=T[1]}let E;if(i.followRedirects){if(t._redirects===0){t._originalIpc=l,t._originalSecure=o,t._originalHostOrSocketPath=l?i.socketPath:s.host;let T=n&&n.headers;if(n={...n,headers:{}},T)for(let[I,D]of Object.entries(T))n.headers[I.toLowerCase()]=D}else if(t.listenerCount("redirect")===0){let T=l?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!T||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,T||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),E=t._req=w(i),t._redirects&&t.emit("redirect",t.url,E)}else E=t._req=w(i);i.timeout&&E.on("timeout",()=>{te(t,E,"Opening handshake has timed out")}),E.on("error",T=>{E===null||E[dn]||(E=t._req=null,Ct(t,T))}),E.on("response",T=>{let I=T.headers.location,D=T.statusCode;if(I&&i.followRedirects&&D>=300&&D<400){if(++t._redirects>i.maxRedirects){te(t,E,"Maximum redirects exceeded");return}E.abort();let v;try{v=new Ur(I,e)}catch{let c=new SyntaxError(`Invalid URL: ${I}`);Ct(t,c);return}pn(t,v,r,n)}else t.emit("unexpected-response",E,T)||te(t,E,`Unexpected server response: ${T.statusCode}`)}),E.on("upgrade",(T,I,D)=>{if(t.emit("upgrade",T),t.readyState!==j.CONNECTING)return;E=t._req=null;let v=T.headers.upgrade;if(v===void 0||v.toLowerCase()!=="websocket"){te(t,I,"Invalid Upgrade header");return}let m=Ra("sha1").update(x+Va).digest("base64");if(T.headers["sec-websocket-accept"]!==m){te(t,I,"Invalid Sec-WebSocket-Accept header");return}let c=T.headers["sec-websocket-protocol"],a;if(c!==void 0?_.size?_.has(c)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":_.size&&(a="Server sent no subprotocol"),a){te(t,I,a);return}c&&(t._protocol=c);let g=T.headers["sec-websocket-extensions"];if(g!==void 0){if(!p){te(t,I,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let C;try{C=Ya(g)}catch{te(t,I,"Invalid Sec-WebSocket-Extensions header");return}let h=Object.keys(C);if(h.length!==1||h[0]!==Oe.extensionName){te(t,I,"Server indicated an extension that was not requested");return}try{p.accept(C[Oe.extensionName])}catch{te(t,I,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Oe.extensionName]=p}t.setSocket(I,D,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(E,t):E.end()}function Ct(t,e){t._readyState=j.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function Ja(t){return t.path=t.socketPath,fn.connect(t)}function ec(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=fn.isIP(t.host)?"":t.host),Ua.connect(t)}function te(t,e,r){t._readyState=j.CLOSING;let n=new Error(r);Error.captureStackTrace(n,te),e.setHeader?(e[dn]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Ct,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function qr(t,e,r){if(e){let n=Xa(e)?e.size:Ka(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${_e[t.readyState]})`);process.nextTick(r,n)}}function tc(t,e){let r=this[$];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[$]!==void 0&&(r._socket.removeListener("data",Nt),process.nextTick(yn,r._socket),t===1005?r.close():r.close(t,e))}function rc(){let t=this[$];t.isPaused||t._socket.resume()}function ic(t){let e=this[$];e._socket[$]!==void 0&&(e._socket.removeListener("data",Nt),process.nextTick(yn,e._socket),e.close(t[Ga])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function ln(){this[$].emitClose()}function nc(t,e){this[$].emit("message",t,e)}function sc(t){let e=this[$];e._autoPong&&e.pong(t,!this._isServer,hn),e.emit("ping",t)}function oc(t){this[$].emit("pong",t)}function yn(t){t.resume()}function ac(t){let e=this[$];e.readyState!==j.CLOSED&&(e.readyState===j.OPEN&&(e._readyState=j.CLOSING,mn(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function mn(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),Qa)}function gn(){let t=this[$];this.removeListener("close",gn),this.removeListener("data",Nt),this.removeListener("end",_n),t._readyState=j.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[$]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",ln),t._receiver.on("finish",ln))}function Nt(t){this[$]._receiver.write(t)||this.pause()}function _n(){let t=this[$];t._readyState=j.CLOSING,t._receiver.end(),this.end()}function wn(){let t=this[$];this.removeListener("error",wn),this.on("error",hn),t&&(t._readyState=j.CLOSING,this.destroy())}});var vn=P((nl,bn)=>{"use strict";var{Duplex:cc}=require("stream");function Tn(t){t.emit("close")}function uc(){!this.destroyed&&this._writableState.finished&&this.destroy()}function xn(t){this.removeListener("error",xn),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function lc(t,e){let r=!0,n=new cc({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let l=!o&&n._readableState.objectMode?s.toString():s;n.push(l)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(Tn,n);return}let o=!1;t.once("error",function(f){o=!0,s(f)}),t.once("close",function(){o||s(i),process.nextTick(Tn,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",uc),n.on("error",xn),n}bn.exports=lc});var On=P((sl,Dn)=>{"use strict";var{tokenChars:fc}=je();function hc(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&fc[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let l=t.slice(r,n);if(e.has(l))throw new SyntaxError(`The "${l}" subprotocol is duplicated`);e.add(l),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}Dn.exports={parse:hc}});var Pn=P((al,Ln)=>{"use strict";var dc=require("events"),It=require("http"),{Duplex:ol}=require("stream"),{createHash:pc}=require("crypto"),Sn=Br(),Fe=tt(),yc=On(),mc=jr(),{GUID:gc,kWebSocket:_c}=ye(),wc=/^[+/0-9A-Za-z]{22}==$/,Cn=0,Nn=1,An=2,Xr=class extends dc{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:mc,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=It.createServer((n,i)=>{let s=It.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Ec(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Cn}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===An){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(st,this);return}if(e&&this.once("close",e),this._state!==Nn)if(this._state=Nn,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(st,this):process.nextTick(st,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{st(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",In);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,l=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Be(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Be(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!wc.test(s)){Be(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(l!==8&&l!==13){Be(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){ot(r,400);return}let f=e.headers["sec-websocket-protocol"],d=new Set;if(f!==void 0)try{d=yc.parse(f)}catch{Be(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let x=e.headers["sec-websocket-extensions"],w={};if(this.options.perMessageDeflate&&x!==void 0){let _=new Fe(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=Sn.parse(x);p[Fe.extensionName]&&(_.accept(p[Fe.extensionName]),w[Fe.extensionName]=_)}catch{Be(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let _={origin:e.headers[`${l===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(_,(p,E,T,I)=>{if(!p)return ot(r,E||401,T,I);this.completeUpgrade(w,s,d,e,r,n,i)});return}if(!this.options.verifyClient(_))return ot(r,401)}this.completeUpgrade(w,s,d,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,l){if(!s.readable||!s.writable)return s.destroy();if(s[_c])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Cn)return ot(s,503);let d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${pc("sha1").update(r+gc).digest("base64")}`],x=new this.options.WebSocket(null,void 0,this.options);if(n.size){let w=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;w&&(d.push(`Sec-WebSocket-Protocol: ${w}`),x._protocol=w)}if(e[Fe.extensionName]){let w=e[Fe.extensionName].params,_=Sn.format({[Fe.extensionName]:[w]});d.push(`Sec-WebSocket-Extensions: ${_}`),x._extensions=e}this.emit("headers",d,i),s.write(d.concat(`\r
`).join(`\r
`)),s.removeListener("error",In),x.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(x),x.on("close",()=>{this.clients.delete(x),this._shouldEmitClose&&!this.clients.size&&process.nextTick(st,this)})),l(x,i)}};Ln.exports=Xr;function Ec(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function st(t){t._state=An,t.emit("close")}function In(){this.destroy()}function ot(t,e,r,n){r=r||It.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${It.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Be(t,e,r,n,i){if(t.listenerCount("wsClientError")){let s=new Error(i);Error.captureStackTrace(s,Be),t.emit("wsClientError",s,r,e)}else ot(r,n,i)}});var Vr=P((cl,Mn)=>{"use strict";var we=jr();we.createWebSocketStream=vn();we.Server=Pn();we.Receiver=Ar();we.Sender=Mr();we.WebSocket=we;we.WebSocketServer=we.Server;Mn.exports=we});var Bn=P((ul,Fn)=>{var $e=1e3,ze=$e*60,He=ze*60,Ue=He*24,Tc=Ue*7,xc=Ue*365.25;Fn.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return bc(t);if(r==="number"&&isFinite(t))return e.long?Dc(t):vc(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function bc(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*xc;case"weeks":case"week":case"w":return r*Tc;case"days":case"day":case"d":return r*Ue;case"hours":case"hour":case"hrs":case"hr":case"h":return r*He;case"minutes":case"minute":case"mins":case"min":case"m":return r*ze;case"seconds":case"second":case"secs":case"sec":case"s":return r*$e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function vc(t){var e=Math.abs(t);return e>=Ue?Math.round(t/Ue)+"d":e>=He?Math.round(t/He)+"h":e>=ze?Math.round(t/ze)+"m":e>=$e?Math.round(t/$e)+"s":t+"ms"}function Dc(t){var e=Math.abs(t);return e>=Ue?At(t,e,Ue,"day"):e>=He?At(t,e,He,"hour"):e>=ze?At(t,e,ze,"minute"):e>=$e?At(t,e,$e,"second"):t+" ms"}function At(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Wr=P((ll,Un)=>{function Oc(t){r.debug=r,r.default=r,r.coerce=f,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Bn(),r.destroy=d,Object.keys(t).forEach(x=>{r[x]=t[x]}),r.names=[],r.skips=[],r.formatters={};function e(x){let w=0;for(let _=0;_<x.length;_++)w=(w<<5)-w+x.charCodeAt(_),w|=0;return r.colors[Math.abs(w)%r.colors.length]}r.selectColor=e;function r(x){let w,_=null,p,E;function T(...I){if(!T.enabled)return;let D=T,v=Number(new Date),m=v-(w||v);D.diff=m,D.prev=w,D.curr=v,w=v,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let c=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(g,C)=>{if(g==="%%")return"%";c++;let h=r.formatters[C];if(typeof h=="function"){let N=I[c];g=h.call(D,N),I.splice(c,1),c--}return g}),r.formatArgs.call(D,I),(D.log||r.log).apply(D,I)}return T.namespace=x,T.useColors=r.useColors(),T.color=r.selectColor(x),T.extend=n,T.destroy=r.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(p!==r.namespaces&&(p=r.namespaces,E=r.enabled(x)),E),set:I=>{_=I}}),typeof r.init=="function"&&r.init(T),T}function n(x,w){let _=r(this.namespace+(typeof w>"u"?":":w)+x);return _.log=this.log,_}function i(x){r.save(x),r.namespaces=x,r.names=[],r.skips=[];let w,_=(typeof x=="string"?x:"").split(/[\s,]+/),p=_.length;for(w=0;w<p;w++)_[w]&&(x=_[w].replace(/\*/g,".*?"),x[0]==="-"?r.skips.push(new RegExp("^"+x.slice(1)+"$")):r.names.push(new RegExp("^"+x+"$")))}function s(){let x=[...r.names.map(l),...r.skips.map(l).map(w=>"-"+w)].join(",");return r.enable(""),x}function o(x){if(x[x.length-1]==="*")return!0;let w,_;for(w=0,_=r.skips.length;w<_;w++)if(r.skips[w].test(x))return!1;for(w=0,_=r.names.length;w<_;w++)if(r.names[w].test(x))return!0;return!1}function l(x){return x.toString().substring(2,x.toString().length-2).replace(/\.\*\?$/,"*")}function f(x){return x instanceof Error?x.stack||x.message:x}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Un.exports=Oc});var kn=P((re,Lt)=>{re.formatArgs=Cc;re.save=Nc;re.load=Ic;re.useColors=Sc;re.storage=Ac();re.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();re.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Sc(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Cc(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Lt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}re.log=console.debug||console.log||(()=>{});function Nc(t){try{t?re.storage.setItem("debug",t):re.storage.removeItem("debug")}catch{}}function Ic(){let t;try{t=re.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Ac(){try{return localStorage}catch{}}Lt.exports=Wr()(re);var{formatters:Lc}=Lt.exports;Lc.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var qn=P((z,Mt)=>{var Pc=require("tty"),Pt=require("util");z.init=qc;z.log=Uc;z.formatArgs=Fc;z.save=kc;z.load=Rc;z.useColors=Mc;z.destroy=Pt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");z.colors=[6,2,3,4,5,1];try{let t=require("supports-color");t&&(t.stderr||t).level>=2&&(z.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}z.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Mc(){return"colors"in z.inspectOpts?!!z.inspectOpts.colors:Pc.isatty(process.stderr.fd)}function Fc(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Mt.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Bc()+e+" "+t[0]}function Bc(){return z.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Uc(...t){return process.stderr.write(Pt.formatWithOptions(z.inspectOpts,...t)+`
`)}function kc(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Rc(){return process.env.DEBUG}function qc(t){t.inspectOpts={};let e=Object.keys(z.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=z.inspectOpts[e[r]]}Mt.exports=Wr()(z);var{formatters:Rn}=Mt.exports;Rn.o=function(t){return this.inspectOpts.colors=this.useColors,Pt.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Rn.O=function(t){return this.inspectOpts.colors=this.useColors,Pt.inspect(t,this.inspectOpts)}});var jn=P((fl,Gr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Gr.exports=kn():Gr.exports=qn()});var Vn=P((hl,$r)=>{"use strict";var jc=Object.prototype.hasOwnProperty,Z="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(Z=!1));function Xc(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function Xn(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Xc(r,n||t,i),o=Z?Z+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Ft(t,e){--t._eventsCount===0?t._events=new at:delete t._events[e]}function K(){this._events=new at,this._eventsCount=0}K.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)jc.call(r,n)&&e.push(Z?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};K.prototype.listeners=function(e){var r=Z?Z+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};K.prototype.listenerCount=function(e){var r=Z?Z+e:e,n=this._events[r];return n?n.fn?1:n.length:0};K.prototype.emit=function(e,r,n,i,s,o){var l=Z?Z+e:e;if(!this._events[l])return!1;var f=this._events[l],d=arguments.length,x,w;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,n),!0;case 4:return f.fn.call(f.context,r,n,i),!0;case 5:return f.fn.call(f.context,r,n,i,s),!0;case 6:return f.fn.call(f.context,r,n,i,s,o),!0}for(w=1,x=new Array(d-1);w<d;w++)x[w-1]=arguments[w];f.fn.apply(f.context,x)}else{var _=f.length,p;for(w=0;w<_;w++)switch(f[w].once&&this.removeListener(e,f[w].fn,void 0,!0),d){case 1:f[w].fn.call(f[w].context);break;case 2:f[w].fn.call(f[w].context,r);break;case 3:f[w].fn.call(f[w].context,r,n);break;case 4:f[w].fn.call(f[w].context,r,n,i);break;default:if(!x)for(p=1,x=new Array(d-1);p<d;p++)x[p-1]=arguments[p];f[w].fn.apply(f[w].context,x)}}return!0};K.prototype.on=function(e,r,n){return Xn(this,e,r,n,!1)};K.prototype.once=function(e,r,n){return Xn(this,e,r,n,!0)};K.prototype.removeListener=function(e,r,n,i){var s=Z?Z+e:e;if(!this._events[s])return this;if(!r)return Ft(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&Ft(this,s);else{for(var l=0,f=[],d=o.length;l<d;l++)(o[l].fn!==r||i&&!o[l].once||n&&o[l].context!==n)&&f.push(o[l]);f.length?this._events[s]=f.length===1?f[0]:f:Ft(this,s)}return this};K.prototype.removeAllListeners=function(e){var r;return e?(r=Z?Z+e:e,this._events[r]&&Ft(this,r)):(this._events=new at,this._eventsCount=0),this};K.prototype.off=K.prototype.removeListener;K.prototype.addListener=K.prototype.on;K.prefixed=Z;K.EventEmitter=K;typeof $r<"u"&&($r.exports=K)});var Gn=P((dl,Wn)=>{"use strict";Wn.exports=Vr()});var zr=P((Bt,$n)=>{(function(t,e){typeof Bt=="object"?$n.exports=Bt=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Bt,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function D(){}return function(v){var m;return D.prototype=v,m=new D,D.prototype=null,m}}(),o={},l=o.lib={},f=l.Base=function(){return{extend:function(D){var v=s(this);return D&&v.mixIn(D),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var v in D)D.hasOwnProperty(v)&&(this[v]=D[v]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=l.WordArray=f.extend({init:function(D,v){D=this.words=D||[],v!=r?this.sigBytes=v:this.sigBytes=D.length*4},toString:function(D){return(D||w).stringify(this)},concat:function(D){var v=this.words,m=D.words,c=this.sigBytes,a=D.sigBytes;if(this.clamp(),c%4)for(var g=0;g<a;g++){var C=m[g>>>2]>>>24-g%4*8&255;v[c+g>>>2]|=C<<24-(c+g)%4*8}else for(var h=0;h<a;h+=4)v[c+h>>>2]=m[h>>>2];return this.sigBytes+=a,this},clamp:function(){var D=this.words,v=this.sigBytes;D[v>>>2]&=4294967295<<32-v%4*8,D.length=e.ceil(v/4)},clone:function(){var D=f.clone.call(this);return D.words=this.words.slice(0),D},random:function(D){for(var v=[],m=0;m<D;m+=4)v.push(i());return new d.init(v,D)}}),x=o.enc={},w=x.Hex={stringify:function(D){for(var v=D.words,m=D.sigBytes,c=[],a=0;a<m;a++){var g=v[a>>>2]>>>24-a%4*8&255;c.push((g>>>4).toString(16)),c.push((g&15).toString(16))}return c.join("")},parse:function(D){for(var v=D.length,m=[],c=0;c<v;c+=2)m[c>>>3]|=parseInt(D.substr(c,2),16)<<24-c%8*4;return new d.init(m,v/2)}},_=x.Latin1={stringify:function(D){for(var v=D.words,m=D.sigBytes,c=[],a=0;a<m;a++){var g=v[a>>>2]>>>24-a%4*8&255;c.push(String.fromCharCode(g))}return c.join("")},parse:function(D){for(var v=D.length,m=[],c=0;c<v;c++)m[c>>>2]|=(D.charCodeAt(c)&255)<<24-c%4*8;return new d.init(m,v)}},p=x.Utf8={stringify:function(D){try{return decodeURIComponent(escape(_.stringify(D)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(D){return _.parse(unescape(encodeURIComponent(D)))}},E=l.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(D){typeof D=="string"&&(D=p.parse(D)),this._data.concat(D),this._nDataBytes+=D.sigBytes},_process:function(D){var v,m=this._data,c=m.words,a=m.sigBytes,g=this.blockSize,C=g*4,h=a/C;D?h=e.ceil(h):h=e.max((h|0)-this._minBufferSize,0);var N=h*g,b=e.min(N*4,a);if(N){for(var S=0;S<N;S+=g)this._doProcessBlock(c,S);v=c.splice(0,N),m.sigBytes-=b}return new d.init(v,b)},clone:function(){var D=f.clone.call(this);return D._data=this._data.clone(),D},_minBufferSize:0}),T=l.Hasher=E.extend({cfg:f.extend(),init:function(D){this.cfg=this.cfg.extend(D),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(D){return this._append(D),this._process(),this},finalize:function(D){D&&this._append(D);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(D){return function(v,m){return new D.init(m).finalize(v)}},_createHmacHelper:function(D){return function(v,m){return new I.HMAC.init(D,m).finalize(v)}}}),I=o.algo={};return o}(Math);return t})});var Hn=P((Ut,zn)=>{(function(t,e){typeof Ut=="object"?zn.exports=Ut=e(zr()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Ut,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,l=[],f=[];(function(){function w(T){for(var I=e.sqrt(T),D=2;D<=I;D++)if(!(T%D))return!1;return!0}function _(T){return(T-(T|0))*4294967296|0}for(var p=2,E=0;E<64;)w(p)&&(E<8&&(l[E]=_(e.pow(p,1/2))),f[E]=_(e.pow(p,1/3)),E++),p++})();var d=[],x=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(l.slice(0))},_doProcessBlock:function(w,_){for(var p=this._hash.words,E=p[0],T=p[1],I=p[2],D=p[3],v=p[4],m=p[5],c=p[6],a=p[7],g=0;g<64;g++){if(g<16)d[g]=w[_+g]|0;else{var C=d[g-15],h=(C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3,N=d[g-2],b=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;d[g]=h+d[g-7]+b+d[g-16]}var S=v&m^~v&c,L=E&T^E&I^T&I,M=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),B=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),k=a+B+S+f[g]+d[g],F=M+L;a=c,c=m,m=v,v=D+k|0,D=I,I=T,T=E,E=k+F|0}p[0]=p[0]+E|0,p[1]=p[1]+T|0,p[2]=p[2]+I|0,p[3]=p[3]+D|0,p[4]=p[4]+v|0,p[5]=p[5]+m|0,p[6]=p[6]+c|0,p[7]=p[7]+a|0},_doFinalize:function(){var w=this._data,_=w.words,p=this._nDataBytes*8,E=w.sigBytes*8;return _[E>>>5]|=128<<24-E%32,_[(E+64>>>9<<4)+14]=e.floor(p/4294967296),_[(E+64>>>9<<4)+15]=p,w.sigBytes=_.length*4,this._process(),this._hash},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w}});r.SHA256=s._createHelper(x),r.HmacSHA256=s._createHmacHelper(x)}(Math),t.SHA256})});var Kn=P((kt,Yn)=>{(function(t,e){typeof kt=="object"?Yn.exports=kt=e(zr()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(kt,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,s=i.Base64={stringify:function(l){var f=l.words,d=l.sigBytes,x=this._map;l.clamp();for(var w=[],_=0;_<d;_+=3)for(var p=f[_>>>2]>>>24-_%4*8&255,E=f[_+1>>>2]>>>24-(_+1)%4*8&255,T=f[_+2>>>2]>>>24-(_+2)%4*8&255,I=p<<16|E<<8|T,D=0;D<4&&_+D*.75<d;D++)w.push(x.charAt(I>>>6*(3-D)&63));var v=x.charAt(64);if(v)for(;w.length%4;)w.push(v);return w.join("")},parse:function(l){var f=l.length,d=this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var w=0;w<d.length;w++)x[d.charCodeAt(w)]=w}var _=d.charAt(64);if(_){var p=l.indexOf(_);p!==-1&&(f=p)}return o(l,f,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,f,d){for(var x=[],w=0,_=0;_<f;_++)if(_%4){var p=d[l.charCodeAt(_-1)]<<_%4*2,E=d[l.charCodeAt(_)]>>>6-_%4*2,T=p|E;x[w>>>2]|=T<<24-w%4*8,w++}return n.create(x,w)}}(),t.enc.Base64})});var ns=P(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});function qt(t){return t&&t.__esModule?t:{default:t}}var ct,ts=(t=>(t[t.Hello=0]="Hello",t[t.Identify=1]="Identify",t[t.Identified=2]="Identified",t[t.Reidentify=3]="Reidentify",t[t.Event=5]="Event",t[t.Request=6]="Request",t[t.RequestResponse=7]="RequestResponse",t[t.RequestBatch=8]="RequestBatch",t[t.RequestBatchResponse=9]="RequestBatchResponse",t))(ts||{}),rs=(t=>(t[t.None=0]="None",t[t.General=1]="General",t[t.Config=2]="Config",t[t.Scenes=4]="Scenes",t[t.Inputs=8]="Inputs",t[t.Transitions=16]="Transitions",t[t.Filters=32]="Filters",t[t.Outputs=64]="Outputs",t[t.SceneItems=128]="SceneItems",t[t.MediaInputs=256]="MediaInputs",t[t.Vendors=512]="Vendors",t[t.Ui=1024]="Ui",t[t.All=2047]="All",t[t.InputVolumeMeters=65536]="InputVolumeMeters",t[t.InputActiveStateChanged=131072]="InputActiveStateChanged",t[t.InputShowStateChanged=262144]="InputShowStateChanged",t[t.SceneItemTransformChanged=524288]="SceneItemTransformChanged",t))(rs||{}),is=(t=>(t[t.None=-1]="None",t[t.SerialRealtime=0]="SerialRealtime",t[t.SerialFrame=1]="SerialFrame",t[t.Parallel=2]="Parallel",t))(is||{}),Vc=jn(),Wc=qt(Vc),Qn=Vn(),Gc=Gn(),Zn=qt(Gc),$c=Hn(),Jn=qt($c),zc=Kn(),es=qt(zc);function Hc(t,e,r){let n=es.default.stringify(Jn.default.call(void 0,r+t));return es.default.stringify(Jn.default.call(void 0,n+e))}var ut=Wc.default.call(void 0,"obs-websocket-js"),Ye=class extends Error{constructor(t,e){super(e),this.code=t}},Yc=(ct=class Rt extends Qn.EventEmitter{constructor(...e){super(...e),ct.prototype.__init.call(this),ct.prototype.__init2.call(this)}static __initStatic(){this.requestCounter=1}static generateMessageId(){return String(Rt.requestCounter++)}__init(){this._identified=!1}__init2(){this.internalListeners=new Qn.EventEmitter}get identified(){return this._identified}async connect(e="ws://127.0.0.1:4455",r,n={}){this.socket&&await this.disconnect();try{let i=this.internalEventPromise("ConnectionClosed"),s=this.internalEventPromise("ConnectionError");return await Promise.race([(async()=>{let o=await this.createConnection(e);return this.emit("Hello",o),this.identify(o,r,n)})(),new Promise((o,l)=>{s.then(f=>{f.message&&l(f)}),i.then(f=>{l(f)})})])}catch(i){throw await this.disconnect(),i}}async disconnect(){if(!this.socket||this.socket.readyState===Zn.default.CLOSED)return;let e=this.internalEventPromise("ConnectionClosed");this.socket.close(),await e}async reidentify(e){let r=this.internalEventPromise("op:2");return await this.message(3,e),r}async call(e,r){let n=Rt.generateMessageId(),i=this.internalEventPromise(`res:${n}`);await this.message(6,{requestId:n,requestType:e,requestData:r});let{requestStatus:s,responseData:o}=await i;if(!s.result)throw new Ye(s.code,s.comment);return o}async callBatch(e,r={}){let n=Rt.generateMessageId(),i=this.internalEventPromise(`res:${n}`);await this.message(8,{requestId:n,requests:e,...r});let{results:s}=await i;return s}cleanup(){this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(e){var r;let n=this.internalEventPromise("ConnectionOpened"),i=this.internalEventPromise("op:0");this.socket=new Zn.default(e,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await n;let s=(r=this.socket)==null?void 0:r.protocol;if(!s)throw new Ye(-1,"Server sent no subprotocol");if(s!==this.protocol)throw new Ye(-1,"Server sent an invalid subprotocol");return i}async identify({authentication:e,rpcVersion:r,...n},i,s={}){let o={rpcVersion:r,...s};e&&i&&(o.authentication=Hc(e.salt,e.challenge,i));let l=this.internalEventPromise("op:2");await this.message(1,o);let f=await l;return this._identified=!0,this.emit("Identified",f),{rpcVersion:r,...n,...f}}async message(e,r){if(!this.socket)throw new Error("Not connected");if(!this.identified&&e!==1)throw new Error("Socket not identified");let n=await this.encodeMessage({op:e,d:r});this.socket.send(n)}async internalEventPromise(e){return new Promise(r=>{this.internalListeners.once(e,r)})}onOpen(e){ut("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)}async onMessage(e){try{let{op:r,d:n}=await this.decodeMessage(e.data);if(ut("socket.message: %d %j",r,n),r===void 0||n===void 0)return;switch(r){case 5:{let{eventType:i,eventData:s}=n;this.emit(i,s);return}case 7:case 9:{let{requestId:i}=n;this.internalListeners.emit(`res:${i}`,n);return}default:this.internalListeners.emit(`op:${r}`,n)}}catch(r){ut("error handling message: %o",r)}}onError(e){ut("socket.error: %o",e);let r=new Ye(-1,e.message);this.emit("ConnectionError",r),this.internalListeners.emit("ConnectionError",r)}onClose(e){ut("socket.close: %s (%d)",e.reason,e.code);let r=new Ye(e.code,e.reason);this.emit("ConnectionClosed",r),this.internalListeners.emit("ConnectionClosed",r),this.cleanup()}},ct.__initStatic(),ct);typeof Ee<"u"&&Object.defineProperty(Ee,"__esModule",{value:!0});Ee.WebSocketOpCode=ts;Ee.EventSubscription=rs;Ee.RequestBatchExecutionType=is;Ee.OBSWebSocketError=Ye;Ee.BaseOBSWebSocket=Yc});var lt=P(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.getUint64=oe.getInt64=oe.setInt64=oe.setUint64=oe.UINT32_MAX=void 0;oe.UINT32_MAX=4294967295;function Kc(t,e,r){let n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}oe.setUint64=Kc;function Qc(t,e,r){let n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}oe.setInt64=Qc;function Zc(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}oe.getInt64=Zc;function Jc(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}oe.getUint64=Jc});var Xt=P(Q=>{"use strict";var Hr,Yr,Kr;Object.defineProperty(Q,"__esModule",{value:!0});Q.utf8DecodeTD=Q.TEXT_DECODER_THRESHOLD=Q.utf8DecodeJs=Q.utf8EncodeTE=Q.TEXT_ENCODER_THRESHOLD=Q.utf8EncodeJs=Q.utf8Count=void 0;var ss=lt(),jt=(typeof process>"u"||((Hr=process==null?void 0:process.env)===null||Hr===void 0?void 0:Hr.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function eu(t){let e=t.length,r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if(i&4294967168)if(!(i&4294965248))r+=2;else{if(i>=55296&&i<=56319&&n<e){let s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}i&4294901760?r+=4:r+=3}else{r++;continue}}return r}Q.utf8Count=eu;function tu(t,e,r){let n=t.length,i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if(o&4294967168)if(!(o&4294965248))e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){let l=t.charCodeAt(s);(l&64512)===56320&&(++s,o=((o&1023)<<10)+(l&1023)+65536)}o&4294901760?(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128):(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128)}else{e[i++]=o;continue}e[i++]=o&63|128}}Q.utf8EncodeJs=tu;var ft=jt?new TextEncoder:void 0;Q.TEXT_ENCODER_THRESHOLD=jt?typeof process<"u"&&((Yr=process==null?void 0:process.env)===null||Yr===void 0?void 0:Yr.TEXT_ENCODING)!=="force"?200:0:ss.UINT32_MAX;function ru(t,e,r){e.set(ft.encode(t),r)}function iu(t,e,r){ft.encodeInto(t,e.subarray(r))}Q.utf8EncodeTE=ft?.encodeInto?iu:ru;var nu=4096;function su(t,e,r){let n=e,i=n+r,s=[],o="";for(;n<i;){let l=t[n++];if(!(l&128))s.push(l);else if((l&224)===192){let f=t[n++]&63;s.push((l&31)<<6|f)}else if((l&240)===224){let f=t[n++]&63,d=t[n++]&63;s.push((l&31)<<12|f<<6|d)}else if((l&248)===240){let f=t[n++]&63,d=t[n++]&63,x=t[n++]&63,w=(l&7)<<18|f<<12|d<<6|x;w>65535&&(w-=65536,s.push(w>>>10&1023|55296),w=56320|w&1023),s.push(w)}else s.push(l);s.length>=nu&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}Q.utf8DecodeJs=su;var ou=jt?new TextDecoder:null;Q.TEXT_DECODER_THRESHOLD=jt?typeof process<"u"&&((Kr=process==null?void 0:process.env)===null||Kr===void 0?void 0:Kr.TEXT_DECODER)!=="force"?200:0:ss.UINT32_MAX;function au(t,e,r){let n=t.subarray(e,e+r);return ou.decode(n)}Q.utf8DecodeTD=au});var Zr=P(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.ExtData=void 0;var Qr=class{constructor(e,r){this.type=e,this.data=r}};Vt.ExtData=Qr});var Gt=P(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.DecodeError=void 0;var Jr=class t extends Error{constructor(e){super(e);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};Wt.DecodeError=Jr});var ei=P(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.timestampExtension=Y.decodeTimestampExtension=Y.decodeTimestampToTimeSpec=Y.encodeTimestampExtension=Y.encodeDateToTimeSpec=Y.encodeTimeSpecToTimestamp=Y.EXT_TIMESTAMP=void 0;var cu=Gt(),os=lt();Y.EXT_TIMESTAMP=-1;var uu=4294967296-1,lu=17179869184-1;function as({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=lu)if(e===0&&t<=uu){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,os.setInt64)(n,4,t),r}}Y.encodeTimeSpecToTimestamp=as;function cs(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}Y.encodeDateToTimeSpec=cs;function us(t){if(t instanceof Date){let e=cs(t);return as(e)}else return null}Y.encodeTimestampExtension=us;function ls(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{let r=(0,os.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new cu.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}Y.decodeTimestampToTimeSpec=ls;function fs(t){let e=ls(t);return new Date(e.sec*1e3+e.nsec/1e6)}Y.decodeTimestampExtension=fs;Y.timestampExtension={type:Y.EXT_TIMESTAMP,encode:us,decode:fs}});var Ht=P(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.ExtensionCodec=void 0;var $t=Zr(),fu=ei(),ht=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(fu.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let i=1+e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let i=this.builtInEncoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=-1-n;return new $t.ExtData(o,s)}}}for(let n=0;n<this.encoders.length;n++){let i=this.encoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=n;return new $t.ExtData(o,s)}}}return e instanceof $t.ExtData?e:null}decode(e,r,n){let i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new $t.ExtData(r,e)}};zt.ExtensionCodec=ht;ht.defaultCodec=new ht});var ti=P(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createDataView=Ke.ensureUint8Array=void 0;function hs(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}Ke.ensureUint8Array=hs;function hu(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=hs(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}Ke.createDataView=hu});var ii=P(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.Encoder=le.DEFAULT_INITIAL_BUFFER_SIZE=le.DEFAULT_MAX_DEPTH=void 0;var dt=Xt(),du=Ht(),ds=lt(),pu=ti();le.DEFAULT_MAX_DEPTH=100;le.DEFAULT_INITIAL_BUFFER_SIZE=2048;var ri=class{constructor(e=du.ExtensionCodec.defaultCodec,r=void 0,n=le.DEFAULT_MAX_DEPTH,i=le.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,o=!1,l=!1,f=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=l,this.forceIntegerToFloat=f,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>dt.TEXT_ENCODER_THRESHOLD){let i=(0,dt.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,dt.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=i}else{let i=(0,dt.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,dt.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=i}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,pu.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(let i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(let s of n){let o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,ds.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,ds.setInt64)(this.view,this.pos,e),this.pos+=8}};le.Encoder=ri});var ps=P(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.encode=void 0;var yu=ii(),mu={};function gu(t,e=mu){return new yu.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}Yt.encode=gu});var ys=P(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.prettyByte=void 0;function _u(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}Kt.prettyByte=_u});var ms=P(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.CachedKeyDecoder=void 0;var wu=Xt(),Eu=16,Tu=16,ni=class{constructor(e=Eu,r=Tu){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let i=this.caches[n-1];e:for(let s of i){let o=s.bytes;for(let l=0;l<n;l++)if(o[l]!==e[r+l])continue e;return s.str}return null}store(e,r){let n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){let i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;let s=(0,wu.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}};Qt.CachedKeyDecoder=ni});var Zt=P(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.Decoder=xe.DataViewIndexOutOfBoundsError=void 0;var si=ys(),xu=Ht(),ke=lt(),oi=Xt(),ai=ti(),bu=ms(),Te=Gt(),vu=t=>{let e=typeof t;return e==="string"||e==="number"},pt=-1,ui=new DataView(new ArrayBuffer(0)),Du=new Uint8Array(ui.buffer);xe.DataViewIndexOutOfBoundsError=(()=>{try{ui.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var gs=new xe.DataViewIndexOutOfBoundsError("Insufficient data"),Ou=new bu.CachedKeyDecoder,ci=class{constructor(e=xu.ExtensionCodec.defaultCodec,r=void 0,n=ke.UINT32_MAX,i=ke.UINT32_MAX,s=ke.UINT32_MAX,o=ke.UINT32_MAX,l=ke.UINT32_MAX,f=Ou){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=l,this.keyDecoder=f,this.totalPos=0,this.pos=0,this.view=ui,this.bytes=Du,this.headByte=pt,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=pt,this.stack.length=0}setBuffer(e){this.bytes=(0,ai.ensureUint8Array)(e),this.view=(0,ai.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===pt&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,ai.ensureUint8Array)(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let l of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{n=this.doDecodeSync(),r=!0}catch(f){if(!(f instanceof xe.DataViewIndexOutOfBoundsError))throw f}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,si.prettyByte)(i)} at ${o} (${s} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,i=-1;for await(let s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof xe.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){let i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{let i=e-160;r=this.decodeUtf8String(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let i=this.lookU8();r=this.decodeUtf8String(i,1)}else if(e===218){let i=this.lookU16();r=this.decodeUtf8String(i,2)}else if(e===219){let i=this.lookU32();r=this.decodeUtf8String(i,4)}else if(e===220){let i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){let i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){let i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){let i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){let i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){let i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){let i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){let i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){let i=this.lookU32();r=this.decodeExtension(i,4)}else throw new Te.DecodeError(`Unrecognized type byte: ${(0,si.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let i=n[n.length-1];if(i.type===0)if(i.array[i.position]=r,i.position++,i.position===i.size)n.pop(),r=i.array;else continue e;else if(i.type===1){if(!vu(r))throw new Te.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new Te.DecodeError("The key __proto__ is not allowed");i.key=r,i.type=2;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)n.pop(),r=i.map;else{i.key=null,i.type=1;continue e}}return r}}readHeadByte(){return this.headByte===pt&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=pt}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Te.DecodeError(`Unrecognized array type byte: ${(0,si.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Te.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Te.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new Te.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw gs;let i=this.pos+r,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,i,e):e>oi.TEXT_DECODER_THRESHOLD?s=(0,oi.utf8DecodeTD)(this.bytes,i,e):s=(0,oi.utf8DecodeJs)(this.bytes,i,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Te.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw gs;let n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new Te.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,ke.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,ke.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};xe.Decoder=ci});var li=P(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.decodeMulti=fe.decode=fe.defaultDecodeOptions=void 0;var _s=Zt();fe.defaultDecodeOptions={};function Su(t,e=fe.defaultDecodeOptions){return new _s.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}fe.decode=Su;function Cu(t,e=fe.defaultDecodeOptions){return new _s.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}fe.decodeMulti=Cu});var Ts=P(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.ensureAsyncIterable=Se.asyncIterableFromStream=Se.isAsyncIterable=void 0;function ws(t){return t[Symbol.asyncIterator]!=null}Se.isAsyncIterable=ws;function Nu(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*Es(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;Nu(n),yield n}}finally{e.releaseLock()}}Se.asyncIterableFromStream=Es;function Iu(t){return ws(t)?t:Es(t)}Se.ensureAsyncIterable=Iu});var bs=P(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.decodeStream=he.decodeMultiStream=he.decodeArrayStream=he.decodeAsync=void 0;var fi=Zt(),hi=Ts(),Jt=li();async function Au(t,e=Jt.defaultDecodeOptions){let r=(0,hi.ensureAsyncIterable)(t);return new fi.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}he.decodeAsync=Au;function Lu(t,e=Jt.defaultDecodeOptions){let r=(0,hi.ensureAsyncIterable)(t);return new fi.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}he.decodeArrayStream=Lu;function xs(t,e=Jt.defaultDecodeOptions){let r=(0,hi.ensureAsyncIterable)(t);return new fi.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}he.decodeMultiStream=xs;function Pu(t,e=Jt.defaultDecodeOptions){return xs(t,e)}he.decodeStream=Pu});var Os=P(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.decodeTimestampExtension=U.encodeTimestampExtension=U.decodeTimestampToTimeSpec=U.encodeTimeSpecToTimestamp=U.encodeDateToTimeSpec=U.EXT_TIMESTAMP=U.ExtData=U.ExtensionCodec=U.Encoder=U.DataViewIndexOutOfBoundsError=U.DecodeError=U.Decoder=U.decodeStream=U.decodeMultiStream=U.decodeArrayStream=U.decodeAsync=U.decodeMulti=U.decode=U.encode=void 0;var Mu=ps();Object.defineProperty(U,"encode",{enumerable:!0,get:function(){return Mu.encode}});var vs=li();Object.defineProperty(U,"decode",{enumerable:!0,get:function(){return vs.decode}});Object.defineProperty(U,"decodeMulti",{enumerable:!0,get:function(){return vs.decodeMulti}});var er=bs();Object.defineProperty(U,"decodeAsync",{enumerable:!0,get:function(){return er.decodeAsync}});Object.defineProperty(U,"decodeArrayStream",{enumerable:!0,get:function(){return er.decodeArrayStream}});Object.defineProperty(U,"decodeMultiStream",{enumerable:!0,get:function(){return er.decodeMultiStream}});Object.defineProperty(U,"decodeStream",{enumerable:!0,get:function(){return er.decodeStream}});var Ds=Zt();Object.defineProperty(U,"Decoder",{enumerable:!0,get:function(){return Ds.Decoder}});Object.defineProperty(U,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return Ds.DataViewIndexOutOfBoundsError}});var Fu=Gt();Object.defineProperty(U,"DecodeError",{enumerable:!0,get:function(){return Fu.DecodeError}});var Bu=ii();Object.defineProperty(U,"Encoder",{enumerable:!0,get:function(){return Bu.Encoder}});var Uu=Ht();Object.defineProperty(U,"ExtensionCodec",{enumerable:!0,get:function(){return Uu.ExtensionCodec}});var ku=Zr();Object.defineProperty(U,"ExtData",{enumerable:!0,get:function(){return ku.ExtData}});var Qe=ei();Object.defineProperty(U,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return Qe.EXT_TIMESTAMP}});Object.defineProperty(U,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return Qe.encodeDateToTimeSpec}});Object.defineProperty(U,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return Qe.encodeTimeSpecToTimestamp}});Object.defineProperty(U,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return Qe.decodeTimestampToTimeSpec}});Object.defineProperty(U,"encodeTimestampExtension",{enumerable:!0,get:function(){return Qe.encodeTimestampExtension}});Object.defineProperty(U,"decodeTimestampExtension",{enumerable:!0,get:function(){return Qe.decodeTimestampExtension}})});var Ns=P(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});var di,yt=ns(),Ss=Os(),Cs=(di=class extends yt.BaseOBSWebSocket{constructor(...t){super(...t),di.prototype.__init.call(this)}__init(){this.protocol="obswebsocket.msgpack"}async encodeMessage(t){return Ss.encode.call(void 0,t)}async decodeMessage(t){return typeof Blob<"u"&&t instanceof Blob&&(t=await t.arrayBuffer()),Ss.decode.call(void 0,t)}},di),Ru=Cs;Ce.EventSubscription=yt.EventSubscription;Ce.OBSWebSocket=Cs;Ce.OBSWebSocketError=yt.OBSWebSocketError;Ce.RequestBatchExecutionType=yt.RequestBatchExecutionType;Ce.WebSocketOpCode=yt.WebSocketOpCode;Ce.default=Ru});var tr=P(pi=>{(function(){pi.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(pi)});var de=P((Is,Ne)=>{(function(){var t,e,r,n,i,s,o,l=[].slice,f={}.hasOwnProperty;t=function(){var d,x,w,_,p,E;if(E=arguments[0],p=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(d=0,w=p.length;d<w;d++)if(_=p[d],_!=null)for(x in _)f.call(_,x)&&(E[x]=_[x]);return E},i=function(d){return!!d&&Object.prototype.toString.call(d)==="[object Function]"},s=function(d){var x;return!!d&&((x=typeof d)=="function"||x==="object")},r=function(d){return i(Array.isArray)?Array.isArray(d):Object.prototype.toString.call(d)==="[object Array]"},n=function(d){var x;if(r(d))return!d.length;for(x in d)if(f.call(d,x))return!1;return!0},o=function(d){var x,w;return s(d)&&(w=Object.getPrototypeOf(d))&&(x=w.constructor)&&typeof x=="function"&&x instanceof x&&Function.prototype.toString.call(x)===Function.prototype.toString.call(Object)},e=function(d){return i(d.valueOf)?d.valueOf():d},Ne.exports.assign=t,Ne.exports.isFunction=i,Ne.exports.isObject=s,Ne.exports.isArray=r,Ne.exports.isEmpty=n,Ne.exports.isPlainObject=o,Ne.exports.getValue=e}).call(Is)});var yi=P((As,Ls)=>{(function(){var t;Ls.exports=t=function(){function e(){}return e.prototype.hasFeature=function(r,n){return!0},e.prototype.createDocumentType=function(r,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(r,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(r){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(r,n){throw new Error("This DOM method is not implemented.")},e}()}).call(As)});var Fs=P((Ps,Ms)=>{(function(){var t;Ms.exports=t=function(){function e(){}return e.prototype.handleError=function(r){throw new Error(r)},e}()}).call(Ps)});var ks=P((Bs,Us)=>{(function(){var t;Us.exports=t=function(){function e(r){this.arr=r||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(r){return this.arr[r]||null},e.prototype.contains=function(r){return this.arr.indexOf(r)!==-1},e}()}).call(Bs)});var js=P((Rs,qs)=>{(function(){var t,e,r;e=Fs(),r=ks(),qs.exports=t=function(){function n(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,s){return!0},n.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},n}()}).call(Rs)});var X=P((Xs,Vs)=>{(function(){Vs.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Xs)});var mi=P((Ws,Gs)=>{(function(){var t,e,r;t=X(),r=ie(),Gs.exports=e=function(){function n(i,s,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),s==null)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(o),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(n.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(n.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"specified",{get:function(){return!0}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},n.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},n.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},n}()}).call(Ws)});var rr=P(($s,zs)=>{(function(){var t;zs.exports=t=function(){function e(r){this.nodes=r}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(r){return this.nodes[r]},e.prototype.setNamedItem=function(r){var n;return n=this.nodes[r.nodeName],this.nodes[r.nodeName]=r,n||null},e.prototype.removeNamedItem=function(r){var n;return n=this.nodes[r],delete this.nodes[r],n||null},e.prototype.item=function(r){return this.nodes[Object.keys(this.nodes)[r]]||null},e.prototype.getNamedItemNS=function(r,n){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(r){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(r,n){throw new Error("This DOM method is not implemented.")},e}()}).call($s)});var ir=P((Hs,Ys)=>{(function(){var t,e,r,n,i,s,o,l,f,d=function(w,_){for(var p in _)x.call(_,p)&&(w[p]=_[p]);function E(){this.constructor=w}return E.prototype=_.prototype,w.prototype=new E,w.__super__=_.prototype,w},x={}.hasOwnProperty;f=de(),l=f.isObject,o=f.isFunction,s=f.getValue,i=ie(),t=X(),e=mi(),n=rr(),Ys.exports=r=function(w){d(_,w);function _(p,E,T){var I,D,v,m;if(_.__super__.constructor.call(this,p),E==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(E),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,T!=null&&this.attribute(T),p.type===t.Document&&(this.isRoot=!0,this.documentObject=p,p.rootObject=this,p.children)){for(m=p.children,D=0,v=m.length;D<v;D++)if(I=m[D],I.type===t.DocType){I.name=this.name;break}}}return Object.defineProperty(_.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(_.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(_.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(_.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(_.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(_.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),_.prototype.clone=function(){var p,E,T,I;T=Object.create(this),T.isRoot&&(T.documentObject=null),T.attribs={},I=this.attribs;for(E in I)x.call(I,E)&&(p=I[E],T.attribs[E]=p.clone());return T.children=[],this.children.forEach(function(D){var v;return v=D.clone(),v.parent=T,T.children.push(v)}),T},_.prototype.attribute=function(p,E){var T,I;if(p!=null&&(p=s(p)),l(p))for(T in p)x.call(p,T)&&(I=p[T],this.attribute(T,I));else o(E)&&(E=E.apply()),this.options.keepNullAttributes&&E==null?this.attribs[p]=new e(this,p,""):E!=null&&(this.attribs[p]=new e(this,p,E));return this},_.prototype.removeAttribute=function(p){var E,T,I;if(p==null)throw new Error("Missing attribute name. "+this.debugInfo());if(p=s(p),Array.isArray(p))for(T=0,I=p.length;T<I;T++)E=p[T],delete this.attribs[E];else delete this.attribs[p];return this},_.prototype.toString=function(p){return this.options.writer.element(this,this.options.writer.filterOptions(p))},_.prototype.att=function(p,E){return this.attribute(p,E)},_.prototype.a=function(p,E){return this.attribute(p,E)},_.prototype.getAttribute=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p].value:null},_.prototype.setAttribute=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getAttributeNode=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p]:null},_.prototype.setAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.removeAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getAttributeNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.setAttributeNS=function(p,E,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.removeAttributeNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getAttributeNodeNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.setAttributeNodeNS=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getElementsByTagNameNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.hasAttribute=function(p){return this.attribs.hasOwnProperty(p)},_.prototype.hasAttributeNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.setIdAttribute=function(p,E){return this.attribs.hasOwnProperty(p)?this.attribs[p].isId:E},_.prototype.setIdAttributeNS=function(p,E,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.setIdAttributeNode=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getElementsByTagNameNS=function(p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},_.prototype.isEqualNode=function(p){var E,T,I;if(!_.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.namespaceURI!==this.namespaceURI||p.prefix!==this.prefix||p.localName!==this.localName||p.attribs.length!==this.attribs.length)return!1;for(E=T=0,I=this.attribs.length-1;0<=I?T<=I:T>=I;E=0<=I?++T:--T)if(!this.attribs[E].isEqualNode(p.attribs[E]))return!1;return!0},_}(i)}).call(Hs)});var mt=P((Ks,Qs)=>{(function(){var t,e,r=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function l(){this.constructor=i}return l.prototype=s.prototype,i.prototype=new l,i.__super__=s.prototype,i},n={}.hasOwnProperty;e=ie(),Qs.exports=t=function(i){r(s,i);function s(o){s.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(o,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(o,l,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(o){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},s}(e)}).call(Ks)});var nr=P((Zs,Js)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=X(),r=mt(),Js.exports=e=function(s){n(o,s);function o(l,f){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(f)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.cdata(this,this.options.writer.filterOptions(l))},o}(r)}).call(Zs)});var sr=P((eo,to)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=X(),e=mt(),to.exports=r=function(s){n(o,s);function o(l,f){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(f)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.comment(this,this.options.writer.filterOptions(l))},o}(e)}).call(eo)});var or=P((ro,io)=>{(function(){var t,e,r,n,i=function(o,l){for(var f in l)s.call(l,f)&&(o[f]=l[f]);function d(){this.constructor=o}return d.prototype=l.prototype,o.prototype=new d,o.__super__=l.prototype,o},s={}.hasOwnProperty;n=de().isObject,r=ie(),t=X(),io.exports=e=function(o){i(l,o);function l(f,d,x,w){var _;l.__super__.constructor.call(this,f),n(d)&&(_=d,d=_.version,x=_.encoding,w=_.standalone),d||(d="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(d),x!=null&&(this.encoding=this.stringify.xmlEncoding(x)),w!=null&&(this.standalone=this.stringify.xmlStandalone(w))}return l.prototype.toString=function(f){return this.options.writer.declaration(this,this.options.writer.filterOptions(f))},l}(r)}).call(ro)});var ar=P((no,so)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=X(),so.exports=e=function(s){n(o,s);function o(l,f,d,x,w,_){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(d==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(f));if(!x)throw new Error("Missing DTD attribute type. "+this.debugInfo(f));if(!w)throw new Error("Missing DTD attribute default. "+this.debugInfo(f));if(w.indexOf("#")!==0&&(w="#"+w),!w.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(f));if(_&&!w.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(f));this.elementName=this.stringify.name(f),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(d),this.attributeType=this.stringify.dtdAttType(x),_&&(this.defaultValue=this.stringify.dtdAttDefault(_)),this.defaultValueType=w}return o.prototype.toString=function(l){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(l))},o}(r)}).call(no)});var cr=P((oo,ao)=>{(function(){var t,e,r,n,i=function(o,l){for(var f in l)s.call(l,f)&&(o[f]=l[f]);function d(){this.constructor=o}return d.prototype=l.prototype,o.prototype=new d,o.__super__=l.prototype,o},s={}.hasOwnProperty;n=de().isObject,r=ie(),t=X(),ao.exports=e=function(o){i(l,o);function l(f,d,x,w){if(l.__super__.constructor.call(this,f),x==null)throw new Error("Missing DTD entity name. "+this.debugInfo(x));if(w==null)throw new Error("Missing DTD entity value. "+this.debugInfo(x));if(this.pe=!!d,this.name=this.stringify.name(x),this.type=t.EntityDeclaration,!n(w))this.value=this.stringify.dtdEntityValue(w),this.internal=!0;else{if(!w.pubID&&!w.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(x));if(w.pubID&&!w.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(x));if(this.internal=!1,w.pubID!=null&&(this.pubID=this.stringify.dtdPubID(w.pubID)),w.sysID!=null&&(this.sysID=this.stringify.dtdSysID(w.sysID)),w.nData!=null&&(this.nData=this.stringify.dtdNData(w.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(x))}}return Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return null}}),l.prototype.toString=function(f){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(f))},l}(r)}).call(oo)});var ur=P((co,uo)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=X(),uo.exports=e=function(s){n(o,s);function o(l,f,d){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing DTD element name. "+this.debugInfo());d||(d="(#PCDATA)"),Array.isArray(d)&&(d="("+d.join(",")+")"),this.name=this.stringify.name(f),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(d)}return o.prototype.toString=function(l){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(l))},o}(r)}).call(co)});var lr=P((lo,fo)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=X(),fo.exports=e=function(s){n(o,s);function o(l,f,d){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing DTD notation name. "+this.debugInfo(f));if(!d.pubID&&!d.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(f));this.name=this.stringify.name(f),this.type=t.NotationDeclaration,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(l){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(l))},o}(r)}).call(lo)});var fr=P((ho,po)=>{(function(){var t,e,r,n,i,s,o,l,f,d=function(w,_){for(var p in _)x.call(_,p)&&(w[p]=_[p]);function E(){this.constructor=w}return E.prototype=_.prototype,w.prototype=new E,w.__super__=_.prototype,w},x={}.hasOwnProperty;f=de().isObject,l=ie(),t=X(),e=ar(),n=cr(),r=ur(),i=lr(),o=rr(),po.exports=s=function(w){d(_,w);function _(p,E,T){var I,D,v,m,c,a;if(_.__super__.constructor.call(this,p),this.type=t.DocType,p.children){for(m=p.children,D=0,v=m.length;D<v;D++)if(I=m[D],I.type===t.Element){this.name=I.name;break}}this.documentObject=p,f(E)&&(c=E,E=c.pubID,T=c.sysID),T==null&&(a=[E,T],T=a[0],E=a[1]),E!=null&&(this.pubID=this.stringify.dtdPubID(E)),T!=null&&(this.sysID=this.stringify.dtdSysID(T))}return Object.defineProperty(_.prototype,"entities",{get:function(){var p,E,T,I,D;for(I={},D=this.children,E=0,T=D.length;E<T;E++)p=D[E],p.type===t.EntityDeclaration&&!p.pe&&(I[p.name]=p);return new o(I)}}),Object.defineProperty(_.prototype,"notations",{get:function(){var p,E,T,I,D;for(I={},D=this.children,E=0,T=D.length;E<T;E++)p=D[E],p.type===t.NotationDeclaration&&(I[p.name]=p);return new o(I)}}),Object.defineProperty(_.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(_.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(_.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),_.prototype.element=function(p,E){var T;return T=new r(this,p,E),this.children.push(T),this},_.prototype.attList=function(p,E,T,I,D){var v;return v=new e(this,p,E,T,I,D),this.children.push(v),this},_.prototype.entity=function(p,E){var T;return T=new n(this,!1,p,E),this.children.push(T),this},_.prototype.pEntity=function(p,E){var T;return T=new n(this,!0,p,E),this.children.push(T),this},_.prototype.notation=function(p,E){var T;return T=new i(this,p,E),this.children.push(T),this},_.prototype.toString=function(p){return this.options.writer.docType(this,this.options.writer.filterOptions(p))},_.prototype.ele=function(p,E){return this.element(p,E)},_.prototype.att=function(p,E,T,I,D){return this.attList(p,E,T,I,D)},_.prototype.ent=function(p,E){return this.entity(p,E)},_.prototype.pent=function(p,E){return this.pEntity(p,E)},_.prototype.not=function(p,E){return this.notation(p,E)},_.prototype.up=function(){return this.root()||this.documentObject},_.prototype.isEqualNode=function(p){return!(!_.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.name!==this.name||p.publicId!==this.publicId||p.systemId!==this.systemId)},_}(l)}).call(ho)});var hr=P((yo,mo)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=X(),e=ie(),mo.exports=r=function(s){n(o,s);function o(l,f){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(f)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.raw(this,this.options.writer.filterOptions(l))},o}(e)}).call(yo)});var dr=P((go,_o)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=X(),e=mt(),_o.exports=r=function(s){n(o,s);function o(l,f){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(f)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var l,f,d;for(d="",f=this.previousSibling;f;)d=f.data+d,f=f.previousSibling;for(d+=this.data,l=this.nextSibling;l;)d=d+l.data,l=l.nextSibling;return d}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.text(this,this.options.writer.filterOptions(l))},o.prototype.splitText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(e)}).call(go)});var pr=P((wo,Eo)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=X(),e=mt(),Eo.exports=r=function(s){n(o,s);function o(l,f,d){if(o.__super__.constructor.call(this,l),f==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(f),this.name=this.target,d&&(this.value=this.stringify.insValue(d))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(l))},o.prototype.isEqualNode=function(l){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.target!==this.target)},o}(e)}).call(wo)});var gi=P((To,xo)=>{(function(){var t,e,r,n=function(s,o){for(var l in o)i.call(o,l)&&(s[l]=o[l]);function f(){this.constructor=s}return f.prototype=o.prototype,s.prototype=new f,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=X(),xo.exports=e=function(s){n(o,s);function o(l){o.__super__.constructor.call(this,l),this.type=t.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(l){return""},o}(r)}).call(To)});var Do=P((bo,vo)=>{(function(){var t;vo.exports=t=function(){function e(r){this.nodes=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(r){return this.nodes[r]||null},e}()}).call(bo)});var Co=P((Oo,So)=>{(function(){So.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Oo)});var ie=P((No,Io)=>{(function(){var t,e,r,n,i,s,o,l,f,d,x,w,_,p,E,T,I,D,v,m={}.hasOwnProperty;v=de(),D=v.isObject,I=v.isFunction,T=v.isEmpty,E=v.getValue,l=null,r=null,n=null,i=null,s=null,_=null,p=null,w=null,o=null,e=null,x=null,f=null,t=null,Io.exports=d=function(){function c(a){this.parent=a,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=ir(),r=nr(),n=sr(),i=or(),s=fr(),_=hr(),p=dr(),w=pr(),o=gi(),e=X(),x=Do(),f=rr(),t=Co())}return Object.defineProperty(c.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(c.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(c.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(c.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(c.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new x(this.children)),this.childNodeList}}),Object.defineProperty(c.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(c.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(c.prototype,"previousSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a-1]||null}}),Object.defineProperty(c.prototype,"nextSibling",{get:function(){var a;return a=this.parent.children.indexOf(this),this.parent.children[a+1]||null}}),Object.defineProperty(c.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(c.prototype,"textContent",{get:function(){var a,g,C,h,N;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(N="",h=this.children,g=0,C=h.length;g<C;g++)a=h[g],a.textContent&&(N+=a.textContent);return N}else return null},set:function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),c.prototype.setParent=function(a){var g,C,h,N,b;for(this.parent=a,a&&(this.options=a.options,this.stringify=a.stringify),N=this.children,b=[],C=0,h=N.length;C<h;C++)g=N[C],b.push(g.setParent(this));return b},c.prototype.element=function(a,g,C){var h,N,b,S,L,M,B,k,F,V,R;if(M=null,g===null&&C==null&&(F=[{},null],g=F[0],C=F[1]),g==null&&(g={}),g=E(g),D(g)||(V=[g,C],C=V[0],g=V[1]),a!=null&&(a=E(a)),Array.isArray(a))for(b=0,B=a.length;b<B;b++)N=a[b],M=this.element(N);else if(I(a))M=this.element(a.apply());else if(D(a)){for(L in a)if(m.call(a,L))if(R=a[L],I(R)&&(R=R.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&L.indexOf(this.stringify.convertAttKey)===0)M=this.attribute(L.substr(this.stringify.convertAttKey.length),R);else if(!this.options.separateArrayItems&&Array.isArray(R)&&T(R))M=this.dummy();else if(D(R)&&T(R))M=this.element(L);else if(!this.options.keepNullNodes&&R==null)M=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(R))for(S=0,k=R.length;S<k;S++)N=R[S],h={},h[L]=N,M=this.element(h);else D(R)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&L.indexOf(this.stringify.convertTextKey)===0?M=this.element(R):(M=this.element(L),M.element(R)):M=this.element(L,R)}else!this.options.keepNullNodes&&C===null?M=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&a.indexOf(this.stringify.convertTextKey)===0?M=this.text(C):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&a.indexOf(this.stringify.convertCDataKey)===0?M=this.cdata(C):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&a.indexOf(this.stringify.convertCommentKey)===0?M=this.comment(C):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&a.indexOf(this.stringify.convertRawKey)===0?M=this.raw(C):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&a.indexOf(this.stringify.convertPIKey)===0?M=this.instruction(a.substr(this.stringify.convertPIKey.length),C):M=this.node(a,g,C);if(M==null)throw new Error("Could not create any elements with: "+a+". "+this.debugInfo());return M},c.prototype.insertBefore=function(a,g,C){var h,N,b,S,L;if(a?.type)return b=a,S=g,b.setParent(this),S?(N=children.indexOf(S),L=children.splice(N),children.push(b),Array.prototype.push.apply(children,L)):children.push(b),b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return N=this.parent.children.indexOf(this),L=this.parent.children.splice(N),h=this.parent.element(a,g,C),Array.prototype.push.apply(this.parent.children,L),h},c.prototype.insertAfter=function(a,g,C){var h,N,b;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(a));return N=this.parent.children.indexOf(this),b=this.parent.children.splice(N+1),h=this.parent.element(a,g,C),Array.prototype.push.apply(this.parent.children,b),h},c.prototype.remove=function(){var a,g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return a=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[a,a-a+1].concat(g=[])),this.parent},c.prototype.node=function(a,g,C){var h,N;return a!=null&&(a=E(a)),g||(g={}),g=E(g),D(g)||(N=[g,C],C=N[0],g=N[1]),h=new l(this,a,g),C!=null&&h.text(C),this.children.push(h),h},c.prototype.text=function(a){var g;return D(a)&&this.element(a),g=new p(this,a),this.children.push(g),this},c.prototype.cdata=function(a){var g;return g=new r(this,a),this.children.push(g),this},c.prototype.comment=function(a){var g;return g=new n(this,a),this.children.push(g),this},c.prototype.commentBefore=function(a){var g,C,h;return C=this.parent.children.indexOf(this),h=this.parent.children.splice(C),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,h),this},c.prototype.commentAfter=function(a){var g,C,h;return C=this.parent.children.indexOf(this),h=this.parent.children.splice(C+1),g=this.parent.comment(a),Array.prototype.push.apply(this.parent.children,h),this},c.prototype.raw=function(a){var g;return g=new _(this,a),this.children.push(g),this},c.prototype.dummy=function(){var a;return a=new o(this),a},c.prototype.instruction=function(a,g){var C,h,N,b,S;if(a!=null&&(a=E(a)),g!=null&&(g=E(g)),Array.isArray(a))for(b=0,S=a.length;b<S;b++)C=a[b],this.instruction(C);else if(D(a))for(C in a)m.call(a,C)&&(h=a[C],this.instruction(C,h));else I(g)&&(g=g.apply()),N=new w(this,a,g),this.children.push(N);return this},c.prototype.instructionBefore=function(a,g){var C,h,N;return h=this.parent.children.indexOf(this),N=this.parent.children.splice(h),C=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,N),this},c.prototype.instructionAfter=function(a,g){var C,h,N;return h=this.parent.children.indexOf(this),N=this.parent.children.splice(h+1),C=this.parent.instruction(a,g),Array.prototype.push.apply(this.parent.children,N),this},c.prototype.declaration=function(a,g,C){var h,N;return h=this.document(),N=new i(h,a,g,C),h.children.length===0?h.children.unshift(N):h.children[0].type===e.Declaration?h.children[0]=N:h.children.unshift(N),h.root()||h},c.prototype.dtd=function(a,g){var C,h,N,b,S,L,M,B,k,F;for(h=this.document(),N=new s(h,a,g),k=h.children,b=S=0,M=k.length;S<M;b=++S)if(C=k[b],C.type===e.DocType)return h.children[b]=N,N;for(F=h.children,b=L=0,B=F.length;L<B;b=++L)if(C=F[b],C.isRoot)return h.children.splice(b,0,N),N;return h.children.push(N),N},c.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},c.prototype.root=function(){var a;for(a=this;a;){if(a.type===e.Document)return a.rootObject;if(a.isRoot)return a;a=a.parent}},c.prototype.document=function(){var a;for(a=this;a;){if(a.type===e.Document)return a;a=a.parent}},c.prototype.end=function(a){return this.document().end(a)},c.prototype.prev=function(){var a;if(a=this.parent.children.indexOf(this),a<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[a-1]},c.prototype.next=function(){var a;if(a=this.parent.children.indexOf(this),a===-1||a===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[a+1]},c.prototype.importDocument=function(a){var g;return g=a.root().clone(),g.parent=this,g.isRoot=!1,this.children.push(g),this},c.prototype.debugInfo=function(a){var g,C;return a=a||this.name,a==null&&!((g=this.parent)!=null&&g.name)?"":a==null?"parent: <"+this.parent.name+">":(C=this.parent)!=null&&C.name?"node: <"+a+">, parent: <"+this.parent.name+">":"node: <"+a+">"},c.prototype.ele=function(a,g,C){return this.element(a,g,C)},c.prototype.nod=function(a,g,C){return this.node(a,g,C)},c.prototype.txt=function(a){return this.text(a)},c.prototype.dat=function(a){return this.cdata(a)},c.prototype.com=function(a){return this.comment(a)},c.prototype.ins=function(a,g){return this.instruction(a,g)},c.prototype.doc=function(){return this.document()},c.prototype.dec=function(a,g,C){return this.declaration(a,g,C)},c.prototype.e=function(a,g,C){return this.element(a,g,C)},c.prototype.n=function(a,g,C){return this.node(a,g,C)},c.prototype.t=function(a){return this.text(a)},c.prototype.d=function(a){return this.cdata(a)},c.prototype.c=function(a){return this.comment(a)},c.prototype.r=function(a){return this.raw(a)},c.prototype.i=function(a,g){return this.instruction(a,g)},c.prototype.u=function(){return this.up()},c.prototype.importXMLBuilder=function(a){return this.importDocument(a)},c.prototype.replaceChild=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.removeChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.appendChild=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.hasChildNodes=function(){return this.children.length!==0},c.prototype.cloneNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isSupported=function(a,g){return!0},c.prototype.hasAttributes=function(){return this.attribs.length!==0},c.prototype.compareDocumentPosition=function(a){var g,C;return g=this,g===a?0:this.document()!==a.document()?(C=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?C|=t.Preceding:C|=t.Following,C):g.isAncestor(a)?t.Contains|t.Preceding:g.isDescendant(a)?t.Contains|t.Following:g.isPreceding(a)?t.Preceding:t.Following},c.prototype.isSameNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.lookupPrefix=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isDefaultNamespace=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.lookupNamespaceURI=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isEqualNode=function(a){var g,C,h;if(a.nodeType!==this.nodeType||a.children.length!==this.children.length)return!1;for(g=C=0,h=this.children.length-1;0<=h?C<=h:C>=h;g=0<=h?++C:--C)if(!this.children[g].isEqualNode(a.children[g]))return!1;return!0},c.prototype.getFeature=function(a,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.setUserData=function(a,g,C){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getUserData=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.contains=function(a){return a?a===this||this.isDescendant(a):!1},c.prototype.isDescendant=function(a){var g,C,h,N,b;for(b=this.children,h=0,N=b.length;h<N;h++)if(g=b[h],a===g||(C=g.isDescendant(a),C))return!0;return!1},c.prototype.isAncestor=function(a){return a.isDescendant(this)},c.prototype.isPreceding=function(a){var g,C;return g=this.treePosition(a),C=this.treePosition(this),g===-1||C===-1?!1:g<C},c.prototype.isFollowing=function(a){var g,C;return g=this.treePosition(a),C=this.treePosition(this),g===-1||C===-1?!1:g>C},c.prototype.treePosition=function(a){var g,C;return C=0,g=!1,this.foreachTreeNode(this.document(),function(h){if(C++,!g&&h===a)return g=!0}),g?C:-1},c.prototype.foreachTreeNode=function(a,g){var C,h,N,b,S;for(a||(a=this.document()),b=a.children,h=0,N=b.length;h<N;h++){if(C=b[h],S=g(C))return S;if(S=this.foreachTreeNode(C,g),S)return S}},c}()}).call(No)});var _i=P((Ao,Lo)=>{(function(){var t,e=function(n,i){return function(){return n.apply(i,arguments)}},r={}.hasOwnProperty;Lo.exports=t=function(){function n(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var s,o,l;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(s in o)r.call(o,s)&&(l=o[s],this[s]=l)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var s,o;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+o.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+o.index);return i},n.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(Ao)});var gt=P((Po,Mo)=>{(function(){Mo.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Po)});var wi=P((Fo,Bo)=>{(function(){var t,e,r,n,i,s,o,l,f,d,x,w,_,p,E,T,I,D={}.hasOwnProperty;I=de().assign,t=X(),f=or(),d=fr(),r=nr(),n=sr(),w=ir(),p=hr(),E=dr(),_=pr(),x=gi(),i=ar(),s=ur(),o=cr(),l=lr(),e=gt(),Bo.exports=T=function(){function v(m){var c,a,g;m||(m={}),this.options=m,a=m.writer||{};for(c in a)D.call(a,c)&&(g=a[c],this["_"+c]=this[c],this[c]=g)}return v.prototype.filterOptions=function(m){var c,a,g,C,h,N,b,S;return m||(m={}),m=I({},this.options,m),c={writer:this},c.pretty=m.pretty||!1,c.allowEmpty=m.allowEmpty||!1,c.indent=(a=m.indent)!=null?a:"  ",c.newline=(g=m.newline)!=null?g:`
`,c.offset=(C=m.offset)!=null?C:0,c.dontPrettyTextNodes=(h=(N=m.dontPrettyTextNodes)!=null?N:m.dontprettytextnodes)!=null?h:0,c.spaceBeforeSlash=(b=(S=m.spaceBeforeSlash)!=null?S:m.spacebeforeslash)!=null?b:"",c.spaceBeforeSlash===!0&&(c.spaceBeforeSlash=" "),c.suppressPrettyCount=0,c.user={},c.state=e.None,c},v.prototype.indent=function(m,c,a){var g;return!c.pretty||c.suppressPrettyCount?"":c.pretty&&(g=(a||0)+c.offset+1,g>0)?new Array(g).join(c.indent):""},v.prototype.endline=function(m,c,a){return!c.pretty||c.suppressPrettyCount?"":c.newline},v.prototype.attribute=function(m,c,a){var g;return this.openAttribute(m,c,a),g=" "+m.name+'="'+m.value+'"',this.closeAttribute(m,c,a),g},v.prototype.cdata=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<![CDATA[",c.state=e.InsideTag,g+=m.value,c.state=e.CloseTag,g+="]]>"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.comment=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<!-- ",c.state=e.InsideTag,g+=m.value,c.state=e.CloseTag,g+=" -->"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.declaration=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<?xml",c.state=e.InsideTag,g+=' version="'+m.version+'"',m.encoding!=null&&(g+=' encoding="'+m.encoding+'"'),m.standalone!=null&&(g+=' standalone="'+m.standalone+'"'),c.state=e.CloseTag,g+=c.spaceBeforeSlash+"?>",g+=this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.docType=function(m,c,a){var g,C,h,N,b;if(a||(a=0),this.openNode(m,c,a),c.state=e.OpenTag,N=this.indent(m,c,a),N+="<!DOCTYPE "+m.root().name,m.pubID&&m.sysID?N+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.sysID&&(N+=' SYSTEM "'+m.sysID+'"'),m.children.length>0){for(N+=" [",N+=this.endline(m,c,a),c.state=e.InsideTag,b=m.children,C=0,h=b.length;C<h;C++)g=b[C],N+=this.writeChildNode(g,c,a+1);c.state=e.CloseTag,N+="]"}return c.state=e.CloseTag,N+=c.spaceBeforeSlash+">",N+=this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),N},v.prototype.element=function(m,c,a){var g,C,h,N,b,S,L,M,B,k,F,V,R,Ae;a||(a=0),k=!1,F="",this.openNode(m,c,a),c.state=e.OpenTag,F+=this.indent(m,c,a)+"<"+m.name,V=m.attribs;for(B in V)D.call(V,B)&&(g=V[B],F+=this.attribute(g,c,a));if(h=m.children.length,N=h===0?null:m.children[0],h===0||m.children.every(function(ae){return(ae.type===t.Text||ae.type===t.Raw)&&ae.value===""}))c.allowEmpty?(F+=">",c.state=e.CloseTag,F+="</"+m.name+">"+this.endline(m,c,a)):(c.state=e.CloseTag,F+=c.spaceBeforeSlash+"/>"+this.endline(m,c,a));else if(c.pretty&&h===1&&(N.type===t.Text||N.type===t.Raw)&&N.value!=null)F+=">",c.state=e.InsideTag,c.suppressPrettyCount++,k=!0,F+=this.writeChildNode(N,c,a+1),c.suppressPrettyCount--,k=!1,c.state=e.CloseTag,F+="</"+m.name+">"+this.endline(m,c,a);else{if(c.dontPrettyTextNodes){for(R=m.children,b=0,L=R.length;b<L;b++)if(C=R[b],(C.type===t.Text||C.type===t.Raw)&&C.value!=null){c.suppressPrettyCount++,k=!0;break}}for(F+=">"+this.endline(m,c,a),c.state=e.InsideTag,Ae=m.children,S=0,M=Ae.length;S<M;S++)C=Ae[S],F+=this.writeChildNode(C,c,a+1);c.state=e.CloseTag,F+=this.indent(m,c,a)+"</"+m.name+">",k&&c.suppressPrettyCount--,F+=this.endline(m,c,a),c.state=e.None}return this.closeNode(m,c,a),F},v.prototype.writeChildNode=function(m,c,a){switch(m.type){case t.CData:return this.cdata(m,c,a);case t.Comment:return this.comment(m,c,a);case t.Element:return this.element(m,c,a);case t.Raw:return this.raw(m,c,a);case t.Text:return this.text(m,c,a);case t.ProcessingInstruction:return this.processingInstruction(m,c,a);case t.Dummy:return"";case t.Declaration:return this.declaration(m,c,a);case t.DocType:return this.docType(m,c,a);case t.AttributeDeclaration:return this.dtdAttList(m,c,a);case t.ElementDeclaration:return this.dtdElement(m,c,a);case t.EntityDeclaration:return this.dtdEntity(m,c,a);case t.NotationDeclaration:return this.dtdNotation(m,c,a);default:throw new Error("Unknown XML node type: "+m.constructor.name)}},v.prototype.processingInstruction=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<?",c.state=e.InsideTag,g+=m.target,m.value&&(g+=" "+m.value),c.state=e.CloseTag,g+=c.spaceBeforeSlash+"?>",g+=this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.raw=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a),c.state=e.InsideTag,g+=m.value,c.state=e.CloseTag,g+=this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.text=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a),c.state=e.InsideTag,g+=m.value,c.state=e.CloseTag,g+=this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.dtdAttList=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<!ATTLIST",c.state=e.InsideTag,g+=" "+m.elementName+" "+m.attributeName+" "+m.attributeType,m.defaultValueType!=="#DEFAULT"&&(g+=" "+m.defaultValueType),m.defaultValue&&(g+=' "'+m.defaultValue+'"'),c.state=e.CloseTag,g+=c.spaceBeforeSlash+">"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.dtdElement=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<!ELEMENT",c.state=e.InsideTag,g+=" "+m.name+" "+m.value,c.state=e.CloseTag,g+=c.spaceBeforeSlash+">"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.dtdEntity=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<!ENTITY",c.state=e.InsideTag,m.pe&&(g+=" %"),g+=" "+m.name,m.value?g+=' "'+m.value+'"':(m.pubID&&m.sysID?g+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.sysID&&(g+=' SYSTEM "'+m.sysID+'"'),m.nData&&(g+=" NDATA "+m.nData)),c.state=e.CloseTag,g+=c.spaceBeforeSlash+">"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.dtdNotation=function(m,c,a){var g;return this.openNode(m,c,a),c.state=e.OpenTag,g=this.indent(m,c,a)+"<!NOTATION",c.state=e.InsideTag,g+=" "+m.name,m.pubID&&m.sysID?g+=' PUBLIC "'+m.pubID+'" "'+m.sysID+'"':m.pubID?g+=' PUBLIC "'+m.pubID+'"':m.sysID&&(g+=' SYSTEM "'+m.sysID+'"'),c.state=e.CloseTag,g+=c.spaceBeforeSlash+">"+this.endline(m,c,a),c.state=e.None,this.closeNode(m,c,a),g},v.prototype.openNode=function(m,c,a){},v.prototype.closeNode=function(m,c,a){},v.prototype.openAttribute=function(m,c,a){},v.prototype.closeAttribute=function(m,c,a){},v}()}).call(Fo)});var yr=P((Uo,ko)=>{(function(){var t,e,r=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function l(){this.constructor=i}return l.prototype=s.prototype,i.prototype=new l,i.__super__=s.prototype,i},n={}.hasOwnProperty;e=wi(),ko.exports=t=function(i){r(s,i);function s(o){s.__super__.constructor.call(this,o)}return s.prototype.document=function(o,l){var f,d,x,w,_;for(l=this.filterOptions(l),w="",_=o.children,d=0,x=_.length;d<x;d++)f=_[d],w+=this.writeChildNode(f,l,0);return l.pretty&&w.slice(-l.newline.length)===l.newline&&(w=w.slice(0,-l.newline.length)),w},s}(e)}).call(Uo)});var Ei=P((Ro,qo)=>{(function(){var t,e,r,n,i,s,o,l,f=function(x,w){for(var _ in w)d.call(w,_)&&(x[_]=w[_]);function p(){this.constructor=x}return p.prototype=w.prototype,x.prototype=new p,x.__super__=w.prototype,x},d={}.hasOwnProperty;l=de().isPlainObject,r=yi(),e=js(),i=ie(),t=X(),o=_i(),s=yr(),qo.exports=n=function(x){f(w,x);function w(_){w.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,_||(_={}),_.writer||(_.writer=new s),this.options=_,this.stringify=new o(_)}return Object.defineProperty(w.prototype,"implementation",{value:new r}),Object.defineProperty(w.prototype,"doctype",{get:function(){var _,p,E,T;for(T=this.children,p=0,E=T.length;p<E;p++)if(_=T[p],_.type===t.DocType)return _;return null}}),Object.defineProperty(w.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(w.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(w.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(w.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(w.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(w.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(w.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(w.prototype,"origin",{get:function(){return null}}),Object.defineProperty(w.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(w.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(w.prototype,"contentType",{get:function(){return null}}),w.prototype.end=function(_){var p;return p={},_?l(_)&&(p=_,_=this.options.writer):_=this.options.writer,_.document(this,_.filterOptions(p))},w.prototype.toString=function(_){return this.options.writer.document(this,this.options.writer.filterOptions(_))},w.prototype.createElement=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createTextNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createComment=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createCDATASection=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createProcessingInstruction=function(_,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createAttribute=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createEntityReference=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.importNode=function(_,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createElementNS=function(_,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createAttributeNS=function(_,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagNameNS=function(_,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementById=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.adoptNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.renameNode=function(_,p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByClassName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createEvent=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createNodeIterator=function(_,p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createTreeWalker=function(_,p,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},w}(i)}).call(Ro)});var Vo=P((jo,Xo)=>{(function(){var t,e,r,n,i,s,o,l,f,d,x,w,_,p,E,T,I,D,v,m,c,a,g,C,h={}.hasOwnProperty;C=de(),a=C.isObject,c=C.isFunction,g=C.isPlainObject,m=C.getValue,t=X(),w=Ei(),p=ir(),n=nr(),i=sr(),T=hr(),v=dr(),E=pr(),d=or(),x=fr(),s=ar(),l=cr(),o=ur(),f=lr(),r=mi(),D=_i(),I=yr(),e=gt(),Xo.exports=_=function(){function N(b,S,L){var M;this.name="?xml",this.type=t.Document,b||(b={}),M={},b.writer?g(b.writer)&&(M=b.writer,b.writer=new I):b.writer=new I,this.options=b,this.writer=b.writer,this.writerOptions=this.writer.filterOptions(M),this.stringify=new D(b),this.onDataCallback=S||function(){},this.onEndCallback=L||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return N.prototype.createChildNode=function(b){var S,L,M,B,k,F,V,R;switch(b.type){case t.CData:this.cdata(b.value);break;case t.Comment:this.comment(b.value);break;case t.Element:M={},V=b.attribs;for(L in V)h.call(V,L)&&(S=V[L],M[L]=S.value);this.node(b.name,M);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(b.value);break;case t.Text:this.text(b.value);break;case t.ProcessingInstruction:this.instruction(b.target,b.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+b.constructor.name)}for(R=b.children,k=0,F=R.length;k<F;k++)B=R[k],this.createChildNode(B),B.type===t.Element&&this.up();return this},N.prototype.dummy=function(){return this},N.prototype.node=function(b,S,L){var M;if(b==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(b));return this.openCurrent(),b=m(b),S==null&&(S={}),S=m(S),a(S)||(M=[S,L],L=M[0],S=M[1]),this.currentNode=new p(this,b,S),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,L!=null&&this.text(L),this},N.prototype.element=function(b,S,L){var M,B,k,F,V,R;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(b)||a(b)||c(b))for(F=this.options.noValidation,this.options.noValidation=!0,R=new w(this.options).element("TEMP_ROOT"),R.element(b),this.options.noValidation=F,V=R.children,B=0,k=V.length;B<k;B++)M=V[B],this.createChildNode(M),M.type===t.Element&&this.up();else this.node(b,S,L);return this},N.prototype.attribute=function(b,S){var L,M;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(b));if(b!=null&&(b=m(b)),a(b))for(L in b)h.call(b,L)&&(M=b[L],this.attribute(L,M));else c(S)&&(S=S.apply()),this.options.keepNullAttributes&&S==null?this.currentNode.attribs[b]=new r(this,b,""):S!=null&&(this.currentNode.attribs[b]=new r(this,b,S));return this},N.prototype.text=function(b){var S;return this.openCurrent(),S=new v(this,b),this.onData(this.writer.text(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.cdata=function(b){var S;return this.openCurrent(),S=new n(this,b),this.onData(this.writer.cdata(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.comment=function(b){var S;return this.openCurrent(),S=new i(this,b),this.onData(this.writer.comment(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.raw=function(b){var S;return this.openCurrent(),S=new T(this,b),this.onData(this.writer.raw(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.instruction=function(b,S){var L,M,B,k,F;if(this.openCurrent(),b!=null&&(b=m(b)),S!=null&&(S=m(S)),Array.isArray(b))for(L=0,k=b.length;L<k;L++)M=b[L],this.instruction(M);else if(a(b))for(M in b)h.call(b,M)&&(B=b[M],this.instruction(M,B));else c(S)&&(S=S.apply()),F=new E(this,b,S),this.onData(this.writer.processingInstruction(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},N.prototype.declaration=function(b,S,L){var M;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return M=new d(this,b,S,L),this.onData(this.writer.declaration(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.doctype=function(b,S,L){if(this.openCurrent(),b==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new x(this,S,L),this.currentNode.rootNodeName=b,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},N.prototype.dtdElement=function(b,S){var L;return this.openCurrent(),L=new o(this,b,S),this.onData(this.writer.dtdElement(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.attList=function(b,S,L,M,B){var k;return this.openCurrent(),k=new s(this,b,S,L,M,B),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.entity=function(b,S){var L;return this.openCurrent(),L=new l(this,!1,b,S),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.pEntity=function(b,S){var L;return this.openCurrent(),L=new l(this,!0,b,S),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.notation=function(b,S){var L;return this.openCurrent(),L=new f(this,b,S),this.onData(this.writer.dtdNotation(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},N.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},N.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},N.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},N.prototype.openNode=function(b){var S,L,M,B;if(!b.isOpen){if(!this.root&&this.currentLevel===0&&b.type===t.Element&&(this.root=b),L="",b.type===t.Element){this.writerOptions.state=e.OpenTag,L=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<"+b.name,B=b.attribs;for(M in B)h.call(B,M)&&(S=B[M],L+=this.writer.attribute(S,this.writerOptions,this.currentLevel));L+=(b.children?">":"/>")+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,L=this.writer.indent(b,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+b.rootNodeName,b.pubID&&b.sysID?L+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(L+=' SYSTEM "'+b.sysID+'"'),b.children?(L+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,L+=">"),L+=this.writer.endline(b,this.writerOptions,this.currentLevel);return this.onData(L,this.currentLevel),b.isOpen=!0}},N.prototype.closeNode=function(b){var S;if(!b.isClosed)return S="",this.writerOptions.state=e.CloseTag,b.type===t.Element?S=this.writer.indent(b,this.writerOptions,this.currentLevel)+"</"+b.name+">"+this.writer.endline(b,this.writerOptions,this.currentLevel):S=this.writer.indent(b,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(b,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(S,this.currentLevel),b.isClosed=!0},N.prototype.onData=function(b,S){return this.documentStarted=!0,this.onDataCallback(b,S+1)},N.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},N.prototype.debugInfo=function(b){return b==null?"":"node: <"+b+">"},N.prototype.ele=function(){return this.element.apply(this,arguments)},N.prototype.nod=function(b,S,L){return this.node(b,S,L)},N.prototype.txt=function(b){return this.text(b)},N.prototype.dat=function(b){return this.cdata(b)},N.prototype.com=function(b){return this.comment(b)},N.prototype.ins=function(b,S){return this.instruction(b,S)},N.prototype.dec=function(b,S,L){return this.declaration(b,S,L)},N.prototype.dtd=function(b,S,L){return this.doctype(b,S,L)},N.prototype.e=function(b,S,L){return this.element(b,S,L)},N.prototype.n=function(b,S,L){return this.node(b,S,L)},N.prototype.t=function(b){return this.text(b)},N.prototype.d=function(b){return this.cdata(b)},N.prototype.c=function(b){return this.comment(b)},N.prototype.r=function(b){return this.raw(b)},N.prototype.i=function(b,S){return this.instruction(b,S)},N.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},N.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},N.prototype.ent=function(b,S){return this.entity(b,S)},N.prototype.pent=function(b,S){return this.pEntity(b,S)},N.prototype.not=function(b,S){return this.notation(b,S)},N}()}).call(jo)});var $o=P((Wo,Go)=>{(function(){var t,e,r,n,i=function(o,l){for(var f in l)s.call(l,f)&&(o[f]=l[f]);function d(){this.constructor=o}return d.prototype=l.prototype,o.prototype=new d,o.__super__=l.prototype,o},s={}.hasOwnProperty;t=X(),n=wi(),e=gt(),Go.exports=r=function(o){i(l,o);function l(f,d){this.stream=f,l.__super__.constructor.call(this,d)}return l.prototype.endline=function(f,d,x){return f.isLastRootNode&&d.state===e.CloseTag?"":l.__super__.endline.call(this,f,d,x)},l.prototype.document=function(f,d){var x,w,_,p,E,T,I,D,v;for(I=f.children,w=_=0,E=I.length;_<E;w=++_)x=I[w],x.isLastRootNode=w===f.children.length-1;for(d=this.filterOptions(d),D=f.children,v=[],p=0,T=D.length;p<T;p++)x=D[p],v.push(this.writeChildNode(x,d,0));return v},l.prototype.attribute=function(f,d,x){return this.stream.write(l.__super__.attribute.call(this,f,d,x))},l.prototype.cdata=function(f,d,x){return this.stream.write(l.__super__.cdata.call(this,f,d,x))},l.prototype.comment=function(f,d,x){return this.stream.write(l.__super__.comment.call(this,f,d,x))},l.prototype.declaration=function(f,d,x){return this.stream.write(l.__super__.declaration.call(this,f,d,x))},l.prototype.docType=function(f,d,x){var w,_,p,E;if(x||(x=0),this.openNode(f,d,x),d.state=e.OpenTag,this.stream.write(this.indent(f,d,x)),this.stream.write("<!DOCTYPE "+f.root().name),f.pubID&&f.sysID?this.stream.write(' PUBLIC "'+f.pubID+'" "'+f.sysID+'"'):f.sysID&&this.stream.write(' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(f,d,x)),d.state=e.InsideTag,E=f.children,_=0,p=E.length;_<p;_++)w=E[_],this.writeChildNode(w,d,x+1);d.state=e.CloseTag,this.stream.write("]")}return d.state=e.CloseTag,this.stream.write(d.spaceBeforeSlash+">"),this.stream.write(this.endline(f,d,x)),d.state=e.None,this.closeNode(f,d,x)},l.prototype.element=function(f,d,x){var w,_,p,E,T,I,D,v,m,c;x||(x=0),this.openNode(f,d,x),d.state=e.OpenTag,this.stream.write(this.indent(f,d,x)+"<"+f.name),m=f.attribs;for(D in m)s.call(m,D)&&(w=m[D],this.attribute(w,d,x));if(p=f.children.length,E=p===0?null:f.children[0],p===0||f.children.every(function(a){return(a.type===t.Text||a.type===t.Raw)&&a.value===""}))d.allowEmpty?(this.stream.write(">"),d.state=e.CloseTag,this.stream.write("</"+f.name+">")):(d.state=e.CloseTag,this.stream.write(d.spaceBeforeSlash+"/>"));else if(d.pretty&&p===1&&(E.type===t.Text||E.type===t.Raw)&&E.value!=null)this.stream.write(">"),d.state=e.InsideTag,d.suppressPrettyCount++,v=!0,this.writeChildNode(E,d,x+1),d.suppressPrettyCount--,v=!1,d.state=e.CloseTag,this.stream.write("</"+f.name+">");else{for(this.stream.write(">"+this.endline(f,d,x)),d.state=e.InsideTag,c=f.children,T=0,I=c.length;T<I;T++)_=c[T],this.writeChildNode(_,d,x+1);d.state=e.CloseTag,this.stream.write(this.indent(f,d,x)+"</"+f.name+">")}return this.stream.write(this.endline(f,d,x)),d.state=e.None,this.closeNode(f,d,x)},l.prototype.processingInstruction=function(f,d,x){return this.stream.write(l.__super__.processingInstruction.call(this,f,d,x))},l.prototype.raw=function(f,d,x){return this.stream.write(l.__super__.raw.call(this,f,d,x))},l.prototype.text=function(f,d,x){return this.stream.write(l.__super__.text.call(this,f,d,x))},l.prototype.dtdAttList=function(f,d,x){return this.stream.write(l.__super__.dtdAttList.call(this,f,d,x))},l.prototype.dtdElement=function(f,d,x){return this.stream.write(l.__super__.dtdElement.call(this,f,d,x))},l.prototype.dtdEntity=function(f,d,x){return this.stream.write(l.__super__.dtdEntity.call(this,f,d,x))},l.prototype.dtdNotation=function(f,d,x){return this.stream.write(l.__super__.dtdNotation.call(this,f,d,x))},l}(n)}).call(Wo)});var Ho=P((zo,Ie)=>{(function(){var t,e,r,n,i,s,o,l,f,d;d=de(),l=d.assign,f=d.isFunction,r=yi(),n=Ei(),i=Vo(),o=yr(),s=$o(),t=X(),e=gt(),Ie.exports.create=function(x,w,_,p){var E,T;if(x==null)throw new Error("Root element needs a name.");return p=l({},w,_,p),E=new n(p),T=E.element(x),p.headless||(E.declaration(p),(p.pubID!=null||p.sysID!=null)&&E.dtd(p)),T},Ie.exports.begin=function(x,w,_){var p;return f(x)&&(p=[x,w],w=p[0],_=p[1],x={}),w?new i(x,w,_):new n(x)},Ie.exports.stringWriter=function(x){return new o(x)},Ie.exports.streamWriter=function(x,w){return new s(x,w)},Ie.exports.implementation=new r,Ie.exports.nodeType=t,Ie.exports.writerState=e}).call(zo)});var Yo=P(Ti=>{(function(){"use strict";var t,e,r,n,i,s={}.hasOwnProperty;t=Ho(),e=tr().defaults,n=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},i=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},Ti.Builder=function(){function o(l){var f,d,x;this.options={},d=e["0.2"];for(f in d)s.call(d,f)&&(x=d[f],this.options[f]=x);for(f in l)s.call(l,f)&&(x=l[f],this.options[f]=x)}return o.prototype.buildObject=function(l){var f,d,x,w,_;return f=this.options.attrkey,d=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===e["0.2"].rootName?(_=Object.keys(l)[0],l=l[_]):_=this.options.rootName,x=function(p){return function(E,T){var I,D,v,m,c,a;if(typeof T!="object")p.options.cdata&&n(T)?E.raw(i(T)):E.txt(T);else if(Array.isArray(T)){for(m in T)if(s.call(T,m)){D=T[m];for(c in D)v=D[c],E=x(E.ele(c),v).up()}}else for(c in T)if(s.call(T,c))if(D=T[c],c===f){if(typeof D=="object")for(I in D)a=D[I],E=E.att(I,a)}else if(c===d)p.options.cdata&&n(D)?E=E.raw(i(D)):E=E.txt(D);else if(Array.isArray(D))for(m in D)s.call(D,m)&&(v=D[m],typeof v=="string"?p.options.cdata&&n(v)?E=E.ele(c).raw(i(v)).up():E=E.ele(c,v).up():E=x(E.ele(c),v).up());else typeof D=="object"?E=x(E.ele(c),D).up():typeof D=="string"&&p.options.cdata&&n(D)?E=E.ele(c).raw(i(D)).up():(D==null&&(D=""),E=E.ele(c,D.toString()).up());return E}}(this),w=t.create(_,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),x(w,l).end(this.options.renderOpts)},o}()}).call(Ti)});var Ko=P(mr=>{(function(t){t.parser=function(y,u){return new r(y,u)},t.SAXParser=r,t.SAXStream=d,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(y,u){if(!(this instanceof r))return new r(y,u);var A=this;i(A),A.q=A.c="",A.bufferCheckPosition=t.MAX_BUFFER_LENGTH,A.opt=u||{},A.opt.lowercase=A.opt.lowercase||A.opt.lowercasetags,A.looseCase=A.opt.lowercase?"toLowerCase":"toUpperCase",A.tags=[],A.closed=A.closedRoot=A.sawRoot=!1,A.tag=A.error=null,A.strict=!!y,A.noscript=!!(y||A.opt.noscript),A.state=h.BEGIN,A.strictEntities=A.opt.strictEntities,A.ENTITIES=A.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),A.attribList=[],A.opt.xmlns&&(A.ns=Object.create(E)),A.opt.unquotedAttributeValues===void 0&&(A.opt.unquotedAttributeValues=!y),A.trackPosition=A.opt.position!==!1,A.trackPosition&&(A.position=A.line=A.column=0),b(A,"onready")}Object.create||(Object.create=function(y){function u(){}u.prototype=y;var A=new u;return A}),Object.keys||(Object.keys=function(y){var u=[];for(var A in y)y.hasOwnProperty(A)&&u.push(A);return u});function n(y){for(var u=Math.max(t.MAX_BUFFER_LENGTH,10),A=0,O=0,q=e.length;O<q;O++){var W=y[e[O]].length;if(W>u)switch(e[O]){case"textNode":L(y);break;case"cdata":S(y,"oncdata",y.cdata),y.cdata="";break;case"script":S(y,"onscript",y.script),y.script="";break;default:B(y,"Max buffer length exceeded: "+e[O])}A=Math.max(A,W)}var G=t.MAX_BUFFER_LENGTH-A;y.bufferCheckPosition=G+y.position}function i(y){for(var u=0,A=e.length;u<A;u++)y[e[u]]=""}function s(y){L(y),y.cdata!==""&&(S(y,"oncdata",y.cdata),y.cdata=""),y.script!==""&&(S(y,"onscript",y.script),y.script="")}r.prototype={end:function(){k(this)},write:ta,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var l=t.EVENTS.filter(function(y){return y!=="error"&&y!=="end"});function f(y,u){return new d(y,u)}function d(y,u){if(!(this instanceof d))return new d(y,u);o.apply(this),this._parser=new r(y,u),this.writable=!0,this.readable=!0;var A=this;this._parser.onend=function(){A.emit("end")},this._parser.onerror=function(O){A.emit("error",O),A._parser.error=null},this._decoder=null,l.forEach(function(O){Object.defineProperty(A,"on"+O,{get:function(){return A._parser["on"+O]},set:function(q){if(!q)return A.removeAllListeners(O),A._parser["on"+O]=q,q;A.on(O,q)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(o.prototype,{constructor:{value:d}}),d.prototype.write=function(y){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(y)){if(!this._decoder){var u=require("string_decoder").StringDecoder;this._decoder=new u("utf8")}y=this._decoder.write(y)}return this._parser.write(y.toString()),this.emit("data",y),!0},d.prototype.end=function(y){return y&&y.length&&this.write(y),this._parser.end(),!0},d.prototype.on=function(y,u){var A=this;return!A._parser["on"+y]&&l.indexOf(y)!==-1&&(A._parser["on"+y]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,y),A.emit.apply(A,O)}),o.prototype.on.call(A,y,u)};var x="[CDATA[",w="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",E={xml:_,xmlns:p},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(y){return y===" "||y===`
`||y==="\r"||y==="	"}function c(y){return y==='"'||y==="'"}function a(y){return y===">"||m(y)}function g(y,u){return y.test(u)}function C(y,u){return!g(y,u)}var h=0;t.STATE={BEGIN:h++,BEGIN_WHITESPACE:h++,TEXT:h++,TEXT_ENTITY:h++,OPEN_WAKA:h++,SGML_DECL:h++,SGML_DECL_QUOTED:h++,DOCTYPE:h++,DOCTYPE_QUOTED:h++,DOCTYPE_DTD:h++,DOCTYPE_DTD_QUOTED:h++,COMMENT_STARTING:h++,COMMENT:h++,COMMENT_ENDING:h++,COMMENT_ENDED:h++,CDATA:h++,CDATA_ENDING:h++,CDATA_ENDING_2:h++,PROC_INST:h++,PROC_INST_BODY:h++,PROC_INST_ENDING:h++,OPEN_TAG:h++,OPEN_TAG_SLASH:h++,ATTRIB:h++,ATTRIB_NAME:h++,ATTRIB_NAME_SAW_WHITE:h++,ATTRIB_VALUE:h++,ATTRIB_VALUE_QUOTED:h++,ATTRIB_VALUE_CLOSED:h++,ATTRIB_VALUE_UNQUOTED:h++,ATTRIB_VALUE_ENTITY_Q:h++,ATTRIB_VALUE_ENTITY_U:h++,CLOSE_TAG:h++,CLOSE_TAG_SAW_WHITE:h++,SCRIPT:h++,SCRIPT_ENDING:h++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(y){var u=t.ENTITIES[y],A=typeof u=="number"?String.fromCharCode(u):u;t.ENTITIES[y]=A});for(var N in t.STATE)t.STATE[t.STATE[N]]=N;h=t.STATE;function b(y,u,A){y[u]&&y[u](A)}function S(y,u,A){y.textNode&&L(y),b(y,u,A)}function L(y){y.textNode=M(y.opt,y.textNode),y.textNode&&b(y,"ontext",y.textNode),y.textNode=""}function M(y,u){return y.trim&&(u=u.trim()),y.normalize&&(u=u.replace(/\s+/g," ")),u}function B(y,u){return L(y),y.trackPosition&&(u+=`
Line: `+y.line+`
Column: `+y.column+`
Char: `+y.c),u=new Error(u),y.error=u,b(y,"onerror",u),y}function k(y){return y.sawRoot&&!y.closedRoot&&F(y,"Unclosed root tag"),y.state!==h.BEGIN&&y.state!==h.BEGIN_WHITESPACE&&y.state!==h.TEXT&&B(y,"Unexpected end"),L(y),y.c="",y.closed=!0,b(y,"onend"),r.call(y,y.strict,y.opt),y}function F(y,u){if(typeof y!="object"||!(y instanceof r))throw new Error("bad call to strictFail");y.strict&&B(y,u)}function V(y){y.strict||(y.tagName=y.tagName[y.looseCase]());var u=y.tags[y.tags.length-1]||y,A=y.tag={name:y.tagName,attributes:{}};y.opt.xmlns&&(A.ns=u.ns),y.attribList.length=0,S(y,"onopentagstart",A)}function R(y,u){var A=y.indexOf(":"),O=A<0?["",y]:y.split(":"),q=O[0],W=O[1];return u&&y==="xmlns"&&(q="xmlns",W=""),{prefix:q,local:W}}function Ae(y){if(y.strict||(y.attribName=y.attribName[y.looseCase]()),y.attribList.indexOf(y.attribName)!==-1||y.tag.attributes.hasOwnProperty(y.attribName)){y.attribName=y.attribValue="";return}if(y.opt.xmlns){var u=R(y.attribName,!0),A=u.prefix,O=u.local;if(A==="xmlns")if(O==="xml"&&y.attribValue!==_)F(y,"xml: prefix must be bound to "+_+`
Actual: `+y.attribValue);else if(O==="xmlns"&&y.attribValue!==p)F(y,"xmlns: prefix must be bound to "+p+`
Actual: `+y.attribValue);else{var q=y.tag,W=y.tags[y.tags.length-1]||y;q.ns===W.ns&&(q.ns=Object.create(W.ns)),q.ns[O]=y.attribValue}y.attribList.push([y.attribName,y.attribValue])}else y.tag.attributes[y.attribName]=y.attribValue,S(y,"onattribute",{name:y.attribName,value:y.attribValue});y.attribName=y.attribValue=""}function ae(y,u){if(y.opt.xmlns){var A=y.tag,O=R(y.tagName);A.prefix=O.prefix,A.local=O.local,A.uri=A.ns[O.prefix]||"",A.prefix&&!A.uri&&(F(y,"Unbound namespace prefix: "+JSON.stringify(y.tagName)),A.uri=O.prefix);var q=y.tags[y.tags.length-1]||y;A.ns&&q.ns!==A.ns&&Object.keys(A.ns).forEach(function(Ci){S(y,"onopennamespace",{prefix:Ci,uri:A.ns[Ci]})});for(var W=0,G=y.attribList.length;W<G;W++){var J=y.attribList[W],ee=J[0],qe=J[1],H=R(ee,!0),pe=H.prefix,ra=H.local,Si=pe===""?"":A.ns[pe]||"",Er={name:ee,value:qe,prefix:pe,local:ra,uri:Si};pe&&pe!=="xmlns"&&!Si&&(F(y,"Unbound namespace prefix: "+JSON.stringify(pe)),Er.uri=pe),y.tag.attributes[ee]=Er,S(y,"onattribute",Er)}y.attribList.length=0}y.tag.isSelfClosing=!!u,y.sawRoot=!0,y.tags.push(y.tag),S(y,"onopentag",y.tag),u||(!y.noscript&&y.tagName.toLowerCase()==="script"?y.state=h.SCRIPT:y.state=h.TEXT,y.tag=null,y.tagName=""),y.attribName=y.attribValue="",y.attribList.length=0}function wr(y){if(!y.tagName){F(y,"Weird empty close tag."),y.textNode+="</>",y.state=h.TEXT;return}if(y.script){if(y.tagName!=="script"){y.script+="</"+y.tagName+">",y.tagName="",y.state=h.SCRIPT;return}S(y,"onscript",y.script),y.script=""}var u=y.tags.length,A=y.tagName;y.strict||(A=A[y.looseCase]());for(var O=A;u--;){var q=y.tags[u];if(q.name!==O)F(y,"Unexpected close tag");else break}if(u<0){F(y,"Unmatched closing tag: "+y.tagName),y.textNode+="</"+y.tagName+">",y.state=h.TEXT;return}y.tagName=A;for(var W=y.tags.length;W-- >u;){var G=y.tag=y.tags.pop();y.tagName=y.tag.name,S(y,"onclosetag",y.tagName);var J={};for(var ee in G.ns)J[ee]=G.ns[ee];var qe=y.tags[y.tags.length-1]||y;y.opt.xmlns&&G.ns!==qe.ns&&Object.keys(G.ns).forEach(function(H){var pe=G.ns[H];S(y,"onclosenamespace",{prefix:H,uri:pe})})}u===0&&(y.closedRoot=!0),y.tagName=y.attribValue=y.attribName="",y.attribList.length=0,y.state=h.TEXT}function ea(y){var u=y.entity,A=u.toLowerCase(),O,q="";return y.ENTITIES[u]?y.ENTITIES[u]:y.ENTITIES[A]?y.ENTITIES[A]:(u=A,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),O=parseInt(u,16),q=O.toString(16)):(u=u.slice(1),O=parseInt(u,10),q=O.toString(10))),u=u.replace(/^0+/,""),isNaN(O)||q.toLowerCase()!==u?(F(y,"Invalid character entity"),"&"+y.entity+";"):String.fromCodePoint(O))}function Di(y,u){u==="<"?(y.state=h.OPEN_WAKA,y.startTagPosition=y.position):m(u)||(F(y,"Non-whitespace before first tag."),y.textNode=u,y.state=h.TEXT)}function Oi(y,u){var A="";return u<y.length&&(A=y.charAt(u)),A}function ta(y){var u=this;if(this.error)throw this.error;if(u.closed)return B(u,"Cannot write after close. Assign an onready handler.");if(y===null)return k(u);typeof y=="object"&&(y=y.toString());for(var A=0,O="";O=Oi(y,A++),u.c=O,!!O;)switch(u.trackPosition&&(u.position++,O===`
`?(u.line++,u.column=0):u.column++),u.state){case h.BEGIN:if(u.state=h.BEGIN_WHITESPACE,O==="\uFEFF")continue;Di(u,O);continue;case h.BEGIN_WHITESPACE:Di(u,O);continue;case h.TEXT:if(u.sawRoot&&!u.closedRoot){for(var q=A-1;O&&O!=="<"&&O!=="&";)O=Oi(y,A++),O&&u.trackPosition&&(u.position++,O===`
`?(u.line++,u.column=0):u.column++);u.textNode+=y.substring(q,A-1)}O==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=h.OPEN_WAKA,u.startTagPosition=u.position):(!m(O)&&(!u.sawRoot||u.closedRoot)&&F(u,"Text data outside of root node."),O==="&"?u.state=h.TEXT_ENTITY:u.textNode+=O);continue;case h.SCRIPT:O==="<"?u.state=h.SCRIPT_ENDING:u.script+=O;continue;case h.SCRIPT_ENDING:O==="/"?u.state=h.CLOSE_TAG:(u.script+="<"+O,u.state=h.SCRIPT);continue;case h.OPEN_WAKA:if(O==="!")u.state=h.SGML_DECL,u.sgmlDecl="";else if(!m(O))if(g(T,O))u.state=h.OPEN_TAG,u.tagName=O;else if(O==="/")u.state=h.CLOSE_TAG,u.tagName="";else if(O==="?")u.state=h.PROC_INST,u.procInstName=u.procInstBody="";else{if(F(u,"Unencoded <"),u.startTagPosition+1<u.position){var W=u.position-u.startTagPosition;O=new Array(W).join(" ")+O}u.textNode+="<"+O,u.state=h.TEXT}continue;case h.SGML_DECL:if(u.sgmlDecl+O==="--"){u.state=h.COMMENT,u.comment="",u.sgmlDecl="";continue}u.doctype&&u.doctype!==!0&&u.sgmlDecl?(u.state=h.DOCTYPE_DTD,u.doctype+="<!"+u.sgmlDecl+O,u.sgmlDecl=""):(u.sgmlDecl+O).toUpperCase()===x?(S(u,"onopencdata"),u.state=h.CDATA,u.sgmlDecl="",u.cdata=""):(u.sgmlDecl+O).toUpperCase()===w?(u.state=h.DOCTYPE,(u.doctype||u.sawRoot)&&F(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):O===">"?(S(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=h.TEXT):(c(O)&&(u.state=h.SGML_DECL_QUOTED),u.sgmlDecl+=O);continue;case h.SGML_DECL_QUOTED:O===u.q&&(u.state=h.SGML_DECL,u.q=""),u.sgmlDecl+=O;continue;case h.DOCTYPE:O===">"?(u.state=h.TEXT,S(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=O,O==="["?u.state=h.DOCTYPE_DTD:c(O)&&(u.state=h.DOCTYPE_QUOTED,u.q=O));continue;case h.DOCTYPE_QUOTED:u.doctype+=O,O===u.q&&(u.q="",u.state=h.DOCTYPE);continue;case h.DOCTYPE_DTD:O==="]"?(u.doctype+=O,u.state=h.DOCTYPE):O==="<"?(u.state=h.OPEN_WAKA,u.startTagPosition=u.position):c(O)?(u.doctype+=O,u.state=h.DOCTYPE_DTD_QUOTED,u.q=O):u.doctype+=O;continue;case h.DOCTYPE_DTD_QUOTED:u.doctype+=O,O===u.q&&(u.state=h.DOCTYPE_DTD,u.q="");continue;case h.COMMENT:O==="-"?u.state=h.COMMENT_ENDING:u.comment+=O;continue;case h.COMMENT_ENDING:O==="-"?(u.state=h.COMMENT_ENDED,u.comment=M(u.opt,u.comment),u.comment&&S(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+O,u.state=h.COMMENT);continue;case h.COMMENT_ENDED:O!==">"?(F(u,"Malformed comment"),u.comment+="--"+O,u.state=h.COMMENT):u.doctype&&u.doctype!==!0?u.state=h.DOCTYPE_DTD:u.state=h.TEXT;continue;case h.CDATA:O==="]"?u.state=h.CDATA_ENDING:u.cdata+=O;continue;case h.CDATA_ENDING:O==="]"?u.state=h.CDATA_ENDING_2:(u.cdata+="]"+O,u.state=h.CDATA);continue;case h.CDATA_ENDING_2:O===">"?(u.cdata&&S(u,"oncdata",u.cdata),S(u,"onclosecdata"),u.cdata="",u.state=h.TEXT):O==="]"?u.cdata+="]":(u.cdata+="]]"+O,u.state=h.CDATA);continue;case h.PROC_INST:O==="?"?u.state=h.PROC_INST_ENDING:m(O)?u.state=h.PROC_INST_BODY:u.procInstName+=O;continue;case h.PROC_INST_BODY:if(!u.procInstBody&&m(O))continue;O==="?"?u.state=h.PROC_INST_ENDING:u.procInstBody+=O;continue;case h.PROC_INST_ENDING:O===">"?(S(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=h.TEXT):(u.procInstBody+="?"+O,u.state=h.PROC_INST_BODY);continue;case h.OPEN_TAG:g(I,O)?u.tagName+=O:(V(u),O===">"?ae(u):O==="/"?u.state=h.OPEN_TAG_SLASH:(m(O)||F(u,"Invalid character in tag name"),u.state=h.ATTRIB));continue;case h.OPEN_TAG_SLASH:O===">"?(ae(u,!0),wr(u)):(F(u,"Forward-slash in opening tag not followed by >"),u.state=h.ATTRIB);continue;case h.ATTRIB:if(m(O))continue;O===">"?ae(u):O==="/"?u.state=h.OPEN_TAG_SLASH:g(T,O)?(u.attribName=O,u.attribValue="",u.state=h.ATTRIB_NAME):F(u,"Invalid attribute name");continue;case h.ATTRIB_NAME:O==="="?u.state=h.ATTRIB_VALUE:O===">"?(F(u,"Attribute without value"),u.attribValue=u.attribName,Ae(u),ae(u)):m(O)?u.state=h.ATTRIB_NAME_SAW_WHITE:g(I,O)?u.attribName+=O:F(u,"Invalid attribute name");continue;case h.ATTRIB_NAME_SAW_WHITE:if(O==="=")u.state=h.ATTRIB_VALUE;else{if(m(O))continue;F(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",S(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",O===">"?ae(u):g(T,O)?(u.attribName=O,u.state=h.ATTRIB_NAME):(F(u,"Invalid attribute name"),u.state=h.ATTRIB)}continue;case h.ATTRIB_VALUE:if(m(O))continue;c(O)?(u.q=O,u.state=h.ATTRIB_VALUE_QUOTED):(u.opt.unquotedAttributeValues||B(u,"Unquoted attribute value"),u.state=h.ATTRIB_VALUE_UNQUOTED,u.attribValue=O);continue;case h.ATTRIB_VALUE_QUOTED:if(O!==u.q){O==="&"?u.state=h.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=O;continue}Ae(u),u.q="",u.state=h.ATTRIB_VALUE_CLOSED;continue;case h.ATTRIB_VALUE_CLOSED:m(O)?u.state=h.ATTRIB:O===">"?ae(u):O==="/"?u.state=h.OPEN_TAG_SLASH:g(T,O)?(F(u,"No whitespace between attributes"),u.attribName=O,u.attribValue="",u.state=h.ATTRIB_NAME):F(u,"Invalid attribute name");continue;case h.ATTRIB_VALUE_UNQUOTED:if(!a(O)){O==="&"?u.state=h.ATTRIB_VALUE_ENTITY_U:u.attribValue+=O;continue}Ae(u),O===">"?ae(u):u.state=h.ATTRIB;continue;case h.CLOSE_TAG:if(u.tagName)O===">"?wr(u):g(I,O)?u.tagName+=O:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=h.SCRIPT):(m(O)||F(u,"Invalid tagname in closing tag"),u.state=h.CLOSE_TAG_SAW_WHITE);else{if(m(O))continue;C(T,O)?u.script?(u.script+="</"+O,u.state=h.SCRIPT):F(u,"Invalid tagname in closing tag."):u.tagName=O}continue;case h.CLOSE_TAG_SAW_WHITE:if(m(O))continue;O===">"?wr(u):F(u,"Invalid characters in closing tag");continue;case h.TEXT_ENTITY:case h.ATTRIB_VALUE_ENTITY_Q:case h.ATTRIB_VALUE_ENTITY_U:var G,J;switch(u.state){case h.TEXT_ENTITY:G=h.TEXT,J="textNode";break;case h.ATTRIB_VALUE_ENTITY_Q:G=h.ATTRIB_VALUE_QUOTED,J="attribValue";break;case h.ATTRIB_VALUE_ENTITY_U:G=h.ATTRIB_VALUE_UNQUOTED,J="attribValue";break}if(O===";"){var ee=ea(u);u.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(ee)?(u.entity="",u.state=G,u.write(ee)):(u[J]+=ee,u.entity="",u.state=G)}else g(u.entity.length?v:D,O)?u.entity+=O:(F(u,"Invalid character in entity name"),u[J]+="&"+u.entity+O,u.entity="",u.state=G);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&n(u),u}String.fromCodePoint||function(){var y=String.fromCharCode,u=Math.floor,A=function(){var O=16384,q=[],W,G,J=-1,ee=arguments.length;if(!ee)return"";for(var qe="";++J<ee;){var H=Number(arguments[J]);if(!isFinite(H)||H<0||H>1114111||u(H)!==H)throw RangeError("Invalid code point: "+H);H<=65535?q.push(H):(H-=65536,W=(H>>10)+55296,G=H%1024+56320,q.push(W,G)),(J+1===ee||q.length>O)&&(qe+=y.apply(null,q),q.length=0)}return qe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:A,configurable:!0,writable:!0}):String.fromCodePoint=A}()})(typeof mr>"u"?mr.sax={}:mr)});var Qo=P(xi=>{(function(){"use strict";xi.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(xi)});var bi=P(Re=>{(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),Re.normalize=function(e){return e.toLowerCase()},Re.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Re.stripPrefix=function(e){return e.replace(t,"")},Re.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Re.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Re)});var Zo=P(be=>{(function(){"use strict";var t,e,r,n,i,s,o,l,f,d=function(_,p){return function(){return _.apply(p,arguments)}},x=function(_,p){for(var E in p)w.call(p,E)&&(_[E]=p[E]);function T(){this.constructor=_}return T.prototype=p.prototype,_.prototype=new T,_.__super__=p.prototype,_},w={}.hasOwnProperty;l=Ko(),n=require("events"),t=Qo(),o=bi(),f=require("timers").setImmediate,e=tr().defaults,i=function(_){return typeof _=="object"&&_!=null&&Object.keys(_).length===0},s=function(_,p,E){var T,I,D;for(T=0,I=_.length;T<I;T++)D=_[T],p=D(p,E);return p},r=function(_,p,E){var T;return T=Object.create(null),T.value=E,T.writable=!0,T.enumerable=!0,T.configurable=!0,Object.defineProperty(_,p,T)},be.Parser=function(_){x(p,_);function p(E){this.parseStringPromise=d(this.parseStringPromise,this),this.parseString=d(this.parseString,this),this.reset=d(this.reset,this),this.assignOrPush=d(this.assignOrPush,this),this.processAsync=d(this.processAsync,this);var T,I,D;if(!(this instanceof be.Parser))return new be.Parser(E);this.options={},I=e["0.2"];for(T in I)w.call(I,T)&&(D=I[T],this.options[T]=D);for(T in E)w.call(E,T)&&(D=E[T],this.options[T]=D);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return p.prototype.processAsync=function(){var E,T;try{return this.remaining.length<=this.options.chunkSize?(E=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(E),this.saxParser.close()):(E=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(E),f(this.processAsync))}catch(I){if(T=I,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},p.prototype.assignOrPush=function(E,T,I){return T in E?(E[T]instanceof Array||r(E,T,[E[T]]),E[T].push(I)):this.options.explicitArray?r(E,T,[I]):r(E,T,I)},p.prototype.reset=function(){var E,T,I,D;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(v){return function(m){if(v.saxParser.resume(),!v.saxParser.errThrown)return v.saxParser.errThrown=!0,v.emit("error",m)}}(this),this.saxParser.onend=function(v){return function(){if(!v.saxParser.ended)return v.saxParser.ended=!0,v.emit("end",v.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,D=[],E=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(v){return function(m){var c,a,g,C,h;if(g={},g[T]="",!v.options.ignoreAttrs){h=m.attributes;for(c in h)w.call(h,c)&&(!(E in g)&&!v.options.mergeAttrs&&(g[E]={}),a=v.options.attrValueProcessors?s(v.options.attrValueProcessors,m.attributes[c],c):m.attributes[c],C=v.options.attrNameProcessors?s(v.options.attrNameProcessors,c):c,v.options.mergeAttrs?v.assignOrPush(g,C,a):r(g[E],C,a))}return g["#name"]=v.options.tagNameProcessors?s(v.options.tagNameProcessors,m.name):m.name,v.options.xmlns&&(g[v.options.xmlnskey]={uri:m.uri,local:m.local}),D.push(g)}}(this),this.saxParser.onclosetag=function(v){return function(){var m,c,a,g,C,h,N,b,S,L;if(h=D.pop(),C=h["#name"],(!v.options.explicitChildren||!v.options.preserveChildrenOrder)&&delete h["#name"],h.cdata===!0&&(m=h.cdata,delete h.cdata),S=D[D.length-1],h[T].match(/^\s*$/)&&!m?(c=h[T],delete h[T]):(v.options.trim&&(h[T]=h[T].trim()),v.options.normalize&&(h[T]=h[T].replace(/\s{2,}/g," ").trim()),h[T]=v.options.valueProcessors?s(v.options.valueProcessors,h[T],C):h[T],Object.keys(h).length===1&&T in h&&!v.EXPLICIT_CHARKEY&&(h=h[T])),i(h)&&(typeof v.options.emptyTag=="function"?h=v.options.emptyTag():h=v.options.emptyTag!==""?v.options.emptyTag:c),v.options.validator!=null&&(L="/"+function(){var M,B,k;for(k=[],M=0,B=D.length;M<B;M++)g=D[M],k.push(g["#name"]);return k}().concat(C).join("/"),function(){var M;try{return h=v.options.validator(L,S&&S[C],h)}catch(B){return M=B,v.emit("error",M)}}()),v.options.explicitChildren&&!v.options.mergeAttrs&&typeof h=="object"){if(!v.options.preserveChildrenOrder)g={},v.options.attrkey in h&&(g[v.options.attrkey]=h[v.options.attrkey],delete h[v.options.attrkey]),!v.options.charsAsChildren&&v.options.charkey in h&&(g[v.options.charkey]=h[v.options.charkey],delete h[v.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(g[v.options.childkey]=h),h=g;else if(S){S[v.options.childkey]=S[v.options.childkey]||[],N={};for(a in h)w.call(h,a)&&r(N,a,h[a]);S[v.options.childkey].push(N),delete h["#name"],Object.keys(h).length===1&&T in h&&!v.EXPLICIT_CHARKEY&&(h=h[T])}}return D.length>0?v.assignOrPush(S,C,h):(v.options.explicitRoot&&(b=h,h={},r(h,C,b)),v.resultObject=h,v.saxParser.ended=!0,v.emit("end",v.resultObject))}}(this),I=function(v){return function(m){var c,a;if(a=D[D.length-1],a)return a[T]+=m,v.options.explicitChildren&&v.options.preserveChildrenOrder&&v.options.charsAsChildren&&(v.options.includeWhiteChars||m.replace(/\\n/g,"").trim()!=="")&&(a[v.options.childkey]=a[v.options.childkey]||[],c={"#name":"__text__"},c[T]=m,v.options.normalize&&(c[T]=c[T].replace(/\s{2,}/g," ").trim()),a[v.options.childkey].push(c)),a}}(this),this.saxParser.ontext=I,this.saxParser.oncdata=function(v){return function(m){var c;if(c=I(m),c)return c.cdata=!0}}(this)},p.prototype.parseString=function(E,T){var I;T!=null&&typeof T=="function"&&(this.on("end",function(D){return this.reset(),T(null,D)}),this.on("error",function(D){return this.reset(),T(D)}));try{return E=E.toString(),E.trim()===""?(this.emit("end",null),!0):(E=t.stripBOM(E),this.options.async?(this.remaining=E,f(this.processAsync),this.saxParser):this.saxParser.write(E).close())}catch(D){if(I=D,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw I}else return this.emit("error",I),this.saxParser.errThrown=!0}},p.prototype.parseStringPromise=function(E){return new Promise(function(T){return function(I,D){return T.parseString(E,function(v,m){return v?D(v):I(m)})}}(this))},p}(n),be.parseString=function(_,p,E){var T,I,D;return E!=null?(typeof E=="function"&&(T=E),typeof p=="object"&&(I=p)):(typeof p=="function"&&(T=p),I={}),D=new be.Parser(I),D.parseString(_,T)},be.parseStringPromise=function(_,p){var E,T;return typeof p=="object"&&(E=p),T=new be.Parser(E),T.parseStringPromise(_)}}).call(be)});var Jo=P(ve=>{(function(){"use strict";var t,e,r,n,i=function(o,l){for(var f in l)s.call(l,f)&&(o[f]=l[f]);function d(){this.constructor=o}return d.prototype=l.prototype,o.prototype=new d,o.__super__=l.prototype,o},s={}.hasOwnProperty;e=tr(),t=Yo(),r=Zo(),n=bi(),ve.defaults=e.defaults,ve.processors=n,ve.ValidationError=function(o){i(l,o);function l(f){this.message=f}return l}(Error),ve.Builder=t.Builder,ve.Parser=r.Parser,ve.parseString=r.parseString,ve.parseStringPromise=r.parseStringPromise}).call(ve)});var jl=Vr(),{OBSWebSocket:qu}=Ns(),gr=require("fs"),ju=Jo(),_r=new qu,Xu={obs:{address:"ws://127.0.0.1:4455",password:"your-password-here"}};function vi(t,e){e.command.message(`<font color="#00FF00">${t}</font>`)}function Vu(t,e=null){let r=e?`${t} Error: ${e.message||e}`:t;mod.command.message(r),mod.error(r)}module.exports=function(e){let r=!1,n=!1,i=!1,s="UnknownBoss",o={},l={},f="UnknownDungeon",d=__dirname+"/config.json";if(!gr.existsSync(d)){e.log("Config file not found. Generating default config..."),gr.writeFileSync(d,JSON.stringify(Xu,null,2),"utf-8"),e.log("Default config file created. Please update the config with your OBS settings.");return}let x=JSON.parse(gr.readFileSync(d,"utf-8")),{address:w,password:_}=x.obs;gr.readFile(__dirname+"/monsters.xml",(T,I)=>{if(T){e.error("Failed to load monsters.xml:",T);return}ju.parseString(I,(D,v)=>{if(D){e.error("Failed to parse monsters.xml:",D);return}v.Zones.Zone.forEach(m=>{let c=parseInt(m.$.id,10),a=m.$.name;l[c]=a,m.Monster.forEach(g=>{let C=parseInt(g.$.id,10),h=g.$.name;o[C]={name:h,zoneId:c}})}),e.log("Monsters and dungeon data loaded successfully.")})}),_r.connect(w,_,{rpcVersion:1}).then(()=>{e.log("Connected to OBS WebSocket successfully."),vi("Connected to OBS WebSocket successfully.",e)}).catch(T=>{let I=`
      Failed to connect to OBS WebSocket. Please check your OBS configuration, WebSocket plugin installation, and the following settings:
      Address: ${w}, Password: ${_||"Not provided"}
      Make sure OBS WebSocket is enabled and the address/password are correct.
    `;Vu(I,T)});function p(){if(!i){let T=e.game.me.name,I=new Date().toISOString().replace(/[:.]/g,"-"),D=`Tera/${f}`,v=`${s}_${T}_${I}`;_r.call("SetProfileParameter",{parameterCategory:"Output",parameterName:"FilenameFormatting",parameterValue:`${D}/${v}`}).then(()=>_r.call("StartRecord")).then(()=>{i=!0,e.log(`Recording started for ${s}`),vi(`Recording started for ${s}!`,e)}).catch(m=>e.error("Failed to start recording:",m))}}function E(){i&&_r.call("StopRecord").then(()=>{i=!1,e.log("Recording stopped"),vi("Recording stopped.",e)}).catch(T=>e.error("Failed to stop recording:",T))}e.hook("S_USER_STATUS",3,T=>{T.status===1&&!r?(r=!0,p()):T.status!==1&&r&&n&&(r=!1,E())}),e.hook("S_BOSS_GAGE_INFO",3,T=>{T.curHp<=0&&!n?(n=!0,E()):T.curHp>0&&(s=o[T.templateId].name||"UnknownBoss",f=l[T.huntingZoneId]||"UnknownDungeon")}),e.hook("S_LOAD_TOPO",3,()=>{i&&e.log("Instance change detected. Resetting..."),n=!1,r=!1,E()}),e.hook("S_INSTANCE_ARROW",4,()=>{i&&e.log("Boss reset detected. Resetting..."),n=!1,r=!1,E()})};
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
